(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{209:function(e,t){},211:function(e,t){},219:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(11),r=a.n(c),i=a(25),o=a(61),s=a(124),l=a(53),u=a(13),d=a(7),j=a(253),b=a(255),h=a(223),p=a(256),f=a(279),O=a(257),m=a(250),x=a(125),g=a.p+"static/media/ms_teams_logo_white.e18990d3.png",v=a(1),y=Object(m.a)((function(e){return{appBar:{display:"flex",flexDirection:"row",width:"100%",border:"2px solid black",background:"#0a0a0a"},brand:{display:"flex",alignItems:"center"},toolbar:{display:"flex",justifyContent:"flex-end"},profile:{display:"flex",justifyContent:"space-between",width:"400px"},userName:{display:"flex",alignItems:"center"},purple:{color:"black",backgroundColor:"#6264a7"}}})),w=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),t=Object(d.a)(e,2),a=t[0],c=t[1],r=Object(i.b)(),o=Object(u.g)(),s=Object(u.f)(),m=y(),w=function(){r({type:"LOGOUT"}),s.push("/auth"),c(null)};return Object(n.useEffect)((function(){var e=null===a||void 0===a?void 0:a.token;e&&(1e3*Object(x.a)(e).exp<(new Date).getTime()&&w());c(JSON.parse(localStorage.getItem("profile")))}),[o]),Object(v.jsx)("div",{children:Object(v.jsx)(j.a,{className:m.appBar,position:"static",children:Object(v.jsxs)(b.a,{container:!0,direction:"row",children:[Object(v.jsx)(b.a,{item:!0,xs:12,md:6,children:Object(v.jsxs)("div",{className:m.brand,children:[Object(v.jsx)("img",{src:g,alt:"icon",height:"60"}),Object(v.jsx)(h.a,{variant:"h6",fontFamily:"Open Sans",children:"Let's Connect"})]})}),Object(v.jsx)(b.a,{item:!0,xs:12,md:6,children:Object(v.jsx)(p.a,{className:m.toolbar,children:(null===a||void 0===a?void 0:a.result)?Object(v.jsxs)("div",{className:m.profile,children:[Object(v.jsx)(f.a,{className:m.purple,children:null===a||void 0===a?void 0:a.result.name.charAt(0)}),Object(v.jsx)(h.a,{className:m.userName,variant:"h6",children:null===a||void 0===a?void 0:a.result.name}),Object(v.jsx)(O.a,{variant:"contained",className:m.logout,color:"primary",onClick:w,children:"Logout"})]}):Object(v.jsx)(O.a,{component:l.b,to:"/auth",variant:"contained",color:"primary",children:"Sign In"})})})]})})})},S=a(41),C=a(18),N=a(263),k=a(222),I=a(131),T=a.n(I),R=a(277),E=a(259),A=a(260),B=a(261),D=a(262),z=function(e){var t=e.name,a=e.handleChange,n=e.label,c=e.autoFocus,r=e.type,i=e.handleShowPassword;return Object(v.jsx)(b.a,{item:!0,xs:12,children:Object(v.jsx)(R.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:c,type:r,InputProps:"password"===t?{endAdornment:Object(v.jsx)(E.a,{position:"end",children:Object(v.jsx)(A.a,{onClick:i,children:"password"===r?Object(v.jsx)(B.a,{}):Object(v.jsx)(D.a,{})})})}:null})})},J=a(12),V=a.n(J),F=a(21),L=a(130),M=a.n(L).a.create({baseURL:"https://video-chat-app-imraghav20.herokuapp.com/api"});M.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var W=function(e){return M.post("/auth/register",e)},P=function(e){return M.post("/auth/login",e)},_=function(e){return M.get("/conversations/".concat(e))},U="AUTH",G=Object(m.a)((function(e){return{body:{background:"#6264a7",height:"100vh",width:"100vw",position:"fixed"},paper:{marginTop:e.spacing(4),marginBottom:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:"#6264a7"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),H={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},Y=function(){var e=G(),t=Object(n.useState)(H),a=Object(d.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!1),s=Object(d.a)(o,2),l=s[0],j=s[1],p=Object(n.useState)(!1),m=Object(d.a)(p,2),x=m[0],g=m[1],y=Object(i.b)(),w=Object(u.f)(),I=function(e){r(Object(C.a)(Object(C.a)({},c),{},Object(S.a)({},e.target.name,e.target.value)))};return Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)(N.a,{component:"main",maxWidth:"xs",children:Object(v.jsxs)(k.a,{className:e.paper,elevation:3,children:[Object(v.jsx)(f.a,{className:e.avatar,children:Object(v.jsx)(T.a,{})}),Object(v.jsx)(h.a,{variant:"h5",children:x?"Sign Up":"Sign In"}),Object(v.jsxs)("form",{autoComplete:"off",className:e.form,onSubmit:function(e){e.preventDefault(),y(x?function(e,t){return function(){var a=Object(F.a)(V.a.mark((function a(n){var c,r;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W(e);case 3:c=a.sent,r=c.data,n({type:U,data:r}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(c,w):function(e,t){return function(){var a=Object(F.a)(V.a.mark((function a(n){var c,r;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,P(e);case 3:c=a.sent,r=c.data,n({type:U,data:r}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(c,w))},children:[Object(v.jsxs)(b.a,{container:!0,spacing:2,children:[x&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z,{name:"firstName",label:"First Name",handleChange:I,autoFocus:!0}),Object(v.jsx)(z,{name:"lastName",label:"Last Name",handleChange:I})]}),Object(v.jsx)(z,{name:"email",label:"Email Address",handleChange:I,type:"email"}),Object(v.jsx)(z,{name:"password",label:"Password",handleChange:I,type:l?"text":"password",handleShowPassword:function(){j((function(e){return!e}))}}),x&&Object(v.jsx)(z,{name:"confirmPassword",label:"Confirm Password",handleChange:I,type:"password"})]}),Object(v.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:x?"Sign Up":"Sign In"}),Object(v.jsx)(b.a,{container:!0,justify:"center",children:Object(v.jsx)(b.a,{item:!0,children:Object(v.jsx)(O.a,{onClick:function(){g((function(e){return!e}))},style:{textTransform:"none"},children:x?"Already have an account? Sign in.":"Don't have an account? Sign up."})})})]})]})})})})},q=a(276),K=a(280),Q=a(264),X=a(265),Z=a(266),$=a(267),ee=a(268),te=a(269),ae=a(270),ne=a(271),ce=a(272),re=a(273),ie=a(274),oe=a(135),se=a.n(oe),le=a(132),ue=a(133),de=a(88),je=a.n(de),be=a.p+"static/media/ding.70168eef.mp3",he=Object(n.createContext)(),pe=Object(ue.io)("https://video-chat-app-imraghav20.herokuapp.com/"),fe=function(e){var t=e.children,a=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),c=Object(d.a)(a,2),r=c[0],i=c[1],o=Object(n.useState)(null),s=Object(d.a)(o,2),l=s[0],j=s[1],b=Object(n.useState)(null),h=Object(d.a)(b,2),p=h[0],f=h[1],O=Object(n.useState)(""),m=Object(d.a)(O,2),x=m[0],g=m[1],y=Object(n.useState)({}),w=Object(d.a)(y,2),S=w[0],C=w[1],N=Object(n.useState)(!1),k=Object(d.a)(N,2),I=k[0],T=k[1],R=Object(n.useState)(!1),E=Object(d.a)(R,2),A=E[0],B=E[1],D=Object(n.useState)(!1),z=Object(d.a)(D,2),J=z[0],V=z[1],F=Object(n.useState)(!1),L=Object(d.a)(F,2),W=L[0],P=L[1],_=Object(n.useState)(""),U=Object(d.a)(_,2),G=U[0],H=U[1],Y=Object(n.useState)(!1),q=Object(d.a)(Y,2),K=q[0],Q=q[1],X=Object(n.useState)(!1),Z=Object(d.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(d.a)(te,2),ne=ae[0],ce=ae[1],re=Object(n.useState)(!1),ie=Object(d.a)(re,2),oe=ie[0],se=ie[1],le=Object(n.useRef)(window.location.hash.replace("#/video-call/","")),ue=Object(n.useRef)(),de=Object(n.useRef)(),fe=Object(n.useRef)(),Oe=Object(n.useRef)([]),me=Object(n.useRef)([]),xe=Object(n.useRef)(new Audio(be)),ge=Object(u.g)(),ve=Object(u.f)();Object(n.useEffect)((function(){var e;(null===r||void 0===r?void 0:r.token)?(navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){j(e),ue.current.srcObject=e,f(e)})),H(r.result.name),me.current.push({name:r.result.name,handRaised:!1}),e=le.current,M.post("/users/".concat(e)),pe.on("me",(function(e){g(e)})),pe.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;C({isReceivedCall:!0,from:t,name:a,signal:n})})),pe.on("hand-raised",(function(){me.current.length>1&&(me.current[1].handRaised=!0),ee(!1),ee(!0)})),pe.on("hand-lowered",(function(){me.current.length>1&&(me.current[1].handRaised=!1),ee(!1),ee(!0)})),pe.on("callEnded",(function(){fe.current=null,me.current.length>1&&me.current.splice(1,1),P(!0),C({}),V(!1),B(!1),T(!0),P(!1)}))):(ve.push("/auth"),i(null))}),[ge,ve,r.result.name,null===r||void 0===r?void 0:r.token]);var ye=function(e){var t=new je.a({initiator:!0,trickle:!1,stream:l});t.on("signal",(function(t){pe.emit("callUser",{userToCall:e,signalData:t,from:x,name:G})})),t.on("stream",(function(e){de.current.srcObject=e})),t.on("data",(function(e){var t=new TextDecoder("utf-8").decode(e),a=JSON.parse(t);Oe.current.push(a),Q(!1),Q(!0),xe.current.play()})),pe.on("callAccepted",(function(e){V(!0);var a=e.signal,n=e.name,c=e.from;C({isReceivedCall:!1,from:c,name:n,signal:a}),me.current.push({name:n,handRaised:!1}),ee(!1),ee(!0),t.signal(e.signal)})),fe.current=t};return Object(v.jsx)(he.Provider,{value:{call:S,callAccepted:J,callStarted:I,setCallStarted:T,callJoined:A,callFull:oe,setCallJoined:B,myVideo:ue,userVideo:de,connectionRef:fe,messageRef:Oe,participantsRef:me,stream:l,videoStream:p,chatVisibility:K,setChatVisibility:Q,participantsVisible:$,setParticipantsVisible:ee,handleHand:function(e){me.current[0].handRaised=e,e?pe.emit("hand-raised",le.current):pe.emit("hand-lowered",le.current)},setHandRaised:ce,handRaised:ne,name:G,setName:H,callEnded:W,me:x,startCall:function(){pe.emit("user-wants-to-join",le.current),pe.on("join-response",(function(e){0===e&&(se(!1),T(!0),pe.emit("user-joined",{userId:x,roomId:le.current})),1===e&&(se(!1),pe.emit("other-user-id",le.current),pe.on("other-user",(function(e){T(!0),B(!0),ye(e)}))),e>=2&&(console.log(e),se(!0))}))},callUser:ye,leaveCall:function(){P(!0),fe.current&&fe.current.destroy(),window.location.reload()},answerCall:function(){V(!0);var e=new je.a({initiator:!1,trickle:!1,stream:l});e.on("signal",(function(e){pe.emit("user-joined",{userId:S.from,roomId:le.current}),pe.emit("answerCall",{signal:e,to:S.from,from:G}),Oe.current.push({text:S.name+" joined the chat."}),me.current.push({name:S.name,handRaised:!1}),ee(!1),ee(!0),xe.current.play()})),e.on("stream",(function(e){de.current.srcObject=e})),e.on("data",(function(e){var t=new TextDecoder("utf-8").decode(e),a=JSON.parse(t);Oe.current.push(a),Q(!1),Q(!0),xe.current.play()})),e.signal(S.signal),fe.current=e}},children:t})},Oe=Object(m.a)((function(e){return{wrapper:{margin:"auto",width:"fit-content"},appBar:{top:"auto",background:"#0a0a0a",width:"fit-content",alignItems:"center",position:"inherit",border:"1px solid white"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(S.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"})}})),me=function(){var e=Oe(),t=Object(n.useContext)(he),a=t.callStarted,c=t.stream,r=t.leaveCall,i=t.myVideo,o=t.videoStream,s=t.connectionRef,l=t.chatVisibility,u=t.setChatVisibility,b=t.participantsVisible,h=t.setParticipantsVisible,f=t.handleHand,O=t.handRaised,m=t.setHandRaised,x=Object(n.useState)(!0),g=Object(d.a)(x,2),y=g[0],w=g[1],S=Object(n.useState)(!0),C=Object(d.a)(S,2),N=C[0],k=C[1],I=Object(n.useState)(!1),T=Object(d.a)(I,2),R=T[0],E=T[1],B=Object(n.useState)(null),D=Object(d.a)(B,2),z=D[0],J=D[1],V=function(){s.current&&s.current.replaceTrack(c.getTracks()[1],o.getTracks()[1],c),i.current.srcObject=o,z&&z.getTracks()[0].stop(),E(!1)};return Object(v.jsx)("div",{className:e.wrapper,children:Object(v.jsx)(j.a,{className:e.appBar,position:"fixed",children:Object(v.jsxs)(p.a,{children:[y&&Object(v.jsx)(K.a,{title:"Turn Camera Off",children:Object(v.jsx)(A.a,{onClick:function(){w(!1),c.getVideoTracks().forEach((function(e){return e.enabled=!1}))},children:Object(v.jsx)(Q.a,{fontSize:"large",style:{fill:"white"}})})}),!y&&Object(v.jsx)(K.a,{title:"Turn Camera On",children:Object(v.jsx)(A.a,{onClick:function(){w(!0),c.getVideoTracks().forEach((function(e){return e.enabled=!0}))},children:Object(v.jsx)(X.a,{fontSize:"large",style:{fill:"white"}})})}),N&&Object(v.jsx)(K.a,{title:"Turn Mic Off",children:Object(v.jsx)(A.a,{onClick:function(){k(!1),c.getAudioTracks().forEach((function(e){return e.enabled=!1}))},children:Object(v.jsx)(Z.a,{fontSize:"large",style:{fill:"white"}})})}),!N&&Object(v.jsx)(K.a,{title:"Turn Mic On",children:Object(v.jsx)(A.a,{onClick:function(){k(!0),c.getAudioTracks().forEach((function(e){return e.enabled=!0}))},children:Object(v.jsx)($.a,{fontSize:"large",style:{fill:"white"}})})}),a&&Object(v.jsxs)("div",{children:[!R&&Object(v.jsx)(K.a,{title:"Share Your Screen",children:Object(v.jsx)(A.a,{onClick:function(){navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){J(e),s.current&&s.current.replaceTrack(c.getTracks()[1],e.getTracks()[0],c),i.current.srcObject=e,E(!0),e.getTracks()[0].onended=function(){V()}}))},children:Object(v.jsx)(ee.a,{fontSize:"large",style:{fill:"white"}})})}),R&&Object(v.jsx)(K.a,{title:"Stop Sharing",children:Object(v.jsx)(A.a,{onClick:function(){V()},children:Object(v.jsx)(te.a,{fontSize:"large",style:{fill:"white"}})})}),Object(v.jsx)(K.a,{title:"Copy Meet Link",children:Object(v.jsx)(le.CopyToClipboard,{text:window.location.href,children:Object(v.jsx)(A.a,{children:Object(v.jsx)(ae.a,{fontSize:"large",style:{fill:"white"}})})})}),!O&&Object(v.jsx)(K.a,{title:"Raise Hand",children:Object(v.jsx)(A.a,{onClick:function(){m(!0),f(!0)},children:Object(v.jsx)(se.a,{fontSize:"large",style:{fill:"white"}})})}),O&&Object(v.jsx)(K.a,{title:"Lower Hand",children:Object(v.jsx)(A.a,{onClick:function(){m(!1),f(!1)},children:Object(v.jsx)(ne.a,{fontSize:"large",style:{fill:"white"}})})}),Object(v.jsx)(K.a,{title:"Show Conversation",children:Object(v.jsx)(A.a,{onClick:function(){u(!l),h(!1)},children:Object(v.jsx)(ce.a,{fontSize:"large",style:{fill:"white"}})})}),Object(v.jsx)(K.a,{title:"Show Participants",children:Object(v.jsx)(A.a,{onClick:function(){h(!b),u(!1)},children:Object(v.jsx)(re.a,{fontSize:"large",style:{fill:"white"}})})}),Object(v.jsx)(K.a,{title:"Leave Call",children:Object(v.jsx)(A.a,{onClick:r,children:Object(v.jsx)(ie.a,{fontSize:"large",style:{fill:"red"}})})})]})]})})})},xe=Object(m.a)((function(e){return{notification:{zIndex:"2000",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},paper:{display:"flex",justifyContent:"center",padding:"10px",fontFamily:"sans-serif"}}})),ge=function(){var e=Object(n.useContext)(he),t=e.answerCall,a=e.call,c=e.callAccepted,r=e.callJoined,i=e.callFull,o=xe();return Object(v.jsxs)("div",{className:o.notification,children:[a.isReceivedCall&&!c&&Object(v.jsxs)(k.a,{className:o.paper,children:[Object(v.jsxs)("h1",{children:[a.name," is calling: \xa0 \xa0 \xa0"]}),Object(v.jsx)(O.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]}),r&&!c&&Object(v.jsx)(k.a,{className:o.paper,children:Object(v.jsx)("h1",{children:"Waiting for host to let you in..."})}),i&&Object(v.jsx)(k.a,{className:o.paper,children:Object(v.jsx)("h1",{children:"The call is currently full. Please join later."})})]})},ve=a(275),ye=function(e){return function(){var t=Object(F.a)(V.a.mark((function t(a){var n,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r=e,M.post("/messages",r);case 3:n=t.sent,c=n.data,a({type:"SEND",payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var r}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},we=a(137),Se=Object(m.a)((function(e){return{message:{maxWidth:"60%",padding:"10px 20px",margin:"5px",border:"1px solid black",borderRadius:"5px",fontFamily:"sans-serif"},left:{float:"left",clear:"both",backgroundColor:"#eeeeee"},right:{float:"right",clear:"both",backgroundColor:"#6264a7",color:"white"},middle:{marginLeft:"auto",marginRight:"auto",textAlign:"center",clear:"both",backgroundColor:"lightblue"},userName:{fontWeight:"bold"},time:{fontSize:"12px",textAlign:"right"}}})),Ce=function(e){var t=e.msg,a=Se(),n=JSON.parse(localStorage.getItem("profile")),c=(null===n||void 0===n?void 0:n.result._id)===t.senderId?a.right:a.left;return Object(v.jsxs)("div",{className:[a.message,c].join(" "),children:[Object(v.jsx)("div",{className:a.userName,children:t.senderName}),Object(v.jsx)("p",{children:t.text}),Object(v.jsx)("div",{className:a.time,children:Object(we.a)(t.createdAt)})]})},Ne=Object(m.a)((function(e){return{paper:{padding:"10px",height:"85vh",width:"20vw",border:"1px solid black",zIndex:"3000",position:"absolute",top:"10vh",right:"0"},messageField:{width:"78%"},chatContainer:{height:"78vh",overflowY:"auto"},message:{width:"60%",padding:"5px",margin:"5px",border:"1px solid black",borderRadius:"5px"},left:{float:"left",clear:"both",backgroundColor:"white"},right:{float:"right",clear:"both",backgroundColor:"#6264a7",color:"white"},middle:{marginLeft:"auto",marginRight:"auto",textAlign:"center",clear:"both",backgroundColor:"lightblue"}}})),ke=function(){var e=Object(n.useContext)(he),t=e.chatVisibility,a=e.messageRef,c=e.connectionRef,r=e.name,o=Object(i.b)(),s=Ne(),l=Object(n.useState)(""),u=Object(d.a)(l,2),j=u[0],b=u[1];Object(n.useEffect)((function(){(function(){var e=Object(F.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.hash.replace("#/video-call/",""),e.next=3,_(t);case 3:n=e.sent,a.current=n.data.messages;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);return Object(v.jsx)("div",{children:t&&Object(v.jsxs)(k.a,{className:s.paper,children:[Object(v.jsx)("div",{id:"chat-container",className:s.chatContainer,children:a.current.map((function(e){return Object(v.jsx)(Ce,{msg:e})}))}),Object(v.jsxs)("form",{action:"#",autoComplete:"off",children:[Object(v.jsx)(R.a,{label:"Type Message",value:j,name:"messageInp",id:"messageInp",className:s.messageField,onChange:function(e){return b(e.target.value)}}),Object(v.jsx)(K.a,{title:"Send Message",children:Object(v.jsx)(A.a,{type:"submit",color:"primary",onClick:function(e){e.preventDefault(),function(){if(j){var e=new Date,t={text:j,senderName:r,senderId:JSON.parse(localStorage.getItem("profile")).result._id,createdAt:e.toISOString()};a.current.push(t),c.current&&c.current.send(JSON.stringify(t)),o(ye({message:j,convoId:window.location.hash.replace("#/video-call/","")})),b("")}}()},children:Object(v.jsx)(ve.a,{fontSize:"large"})})})]})]})})},Ie=a(136),Te=a.n(Ie),Re=Object(m.a)((function(e){return{paper:{padding:"10px",height:"85vh",width:"20vw",border:"1px solid black",zIndex:"3000",position:"absolute",top:"10vh",right:"0",overflow:"auto"},participant:{display:"flex",padding:"10px",cursor:"pointer","&:hover":{backgroundColor:"#eeeeee"}},purple:{color:"black",backgroundColor:"#6264a7"},userName:{display:"flex",alignItems:"center",paddingLeft:"12px",paddingRight:"12px",fontFamily:"sans-serif"}}})),Ee=function(){var e=Object(n.useContext)(he),t=e.participantsRef,a=e.participantsVisible,c=Re();return Object(v.jsx)("div",{children:a&&Object(v.jsx)(k.a,{className:c.paper,children:t.current.map((function(e){return Object(v.jsxs)("div",{className:c.participant,children:[Object(v.jsx)(f.a,{className:c.purple,children:e.name.charAt(0)}),Object(v.jsx)("p",{className:c.userName,children:e.name}),e.handRaised?Object(v.jsx)(Te.a,{fontSize:"large"}):Object(v.jsx)("div",{})]})}))})})},Ae=Object(m.a)((function(e){return{wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},video:Object(S.a)({width:"50vw",height:"78vh",border:"2px solid black"},e.breakpoints.down("xs"),{width:"300px"}),typography:{zIndex:"1000",position:"absolute",border:"2px solid black",background:"#eeeeee",padding:"5px 5px"},button:{marginTop:10,marginRight:"auto",marginLeft:"auto",width:"fit-content"}}})),Be=function(){var e=Object(n.useContext)(he),t=e.name,a=e.callAccepted,c=e.callStarted,r=e.startCall,i=e.myVideo,o=e.userVideo,s=e.callEnded,l=e.stream,u=e.call,j=Ae(),p=Object(n.useState)(""),f=Object(d.a)(p,2),m=f[0],x=f[1];return Object(n.useEffect)((function(){(function(){var e=Object(F.a)(V.a.mark((function e(){var t,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.hash.replace("#/video-call/",""),e.next=3,_(t);case 3:a=e.sent,x(a.data.conversation.conversationName);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.jsxs)("div",{children:[Object(v.jsxs)(b.a,{container:!0,xs:12,direction:"row",justify:"center",children:[Object(v.jsx)(b.a,{container:!0,xs:6,children:l&&Object(v.jsxs)(b.a,{item:!0,xs:12,md:6,children:[Object(v.jsx)(h.a,{className:j.typography,variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(v.jsx)("video",{playsInline:!0,muted:!0,ref:i,autoPlay:!0,className:j.video})]})}),!a&&!c&&Object(v.jsxs)(b.a,{container:!0,xs:6,direction:"column",justify:"center",align:"center",children:[Object(v.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:m}),Object(v.jsx)(O.a,{variant:"contained",onClick:function(){r()},startIcon:Object(v.jsx)(q.a,{fontSize:"large"}),className:j.button,children:"Join Call"})]}),a&&!s&&Object(v.jsxs)(b.a,{item:!0,xs:12,md:6,children:[Object(v.jsx)(h.a,{className:j.typography,variant:"h5",gutterBottom:!0,children:u.name||"Name"}),Object(v.jsx)("video",{playsInline:!0,ref:o,autoPlay:!0,className:j.video})]})]}),Object(v.jsx)(ke,{}),Object(v.jsx)(Ee,{}),Object(v.jsx)(me,{}),Object(v.jsx)(ge,{})]})},De=function(e){return function(){var t=Object(F.a)(V.a.mark((function t(a){var n,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r=e,M.post("/conversations",r);case 3:n=t.sent,c=n.data,a({type:"CREATE",payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var r}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},ze=function(e){return function(){var t=Object(F.a)(V.a.mark((function t(a){var n,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_(e);case 3:n=t.sent,c=n.data,a({type:"GET_CONVO",payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Je=a.p+"static/media/chat_icon.f223e380.png",Ve=Object(m.a)((function(e){return{conversation:{display:"flex",backgroundColor:"#eeeeee",alignItems:"center",padding:"10px",cursor:"pointer","&:hover":{backgroundColor:"#ffffff"}},conversationImg:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",marginRight:"20px"},conversationName:{fontWeight:"bold",fontFamily:"sans-serif"}}})),Fe=function(e){var t=Ve();return Object(v.jsxs)("div",{className:t.conversation,children:[Object(v.jsx)("img",{className:t.conversationImg,src:Je,alt:"Conversation Icon"}),Object(v.jsx)("span",{className:t.conversationName,children:e.conversation.conversationName})]})},Le=Object(m.a)((function(e){return{container:{backgroundColor:"#6264a7",color:"#ffffff",padding:"10px"},button:{margin:"0px 4px"}}})),Me=function(e){var t=e.convoName,a=e.chatId,c=Le(),r=Object(i.b)(),o=Object(n.useState)(!1),s=Object(d.a)(o,2),l=s[0],u=s[1],j=Object(n.useState)({conversationName:""}),p=Object(d.a)(j,2),f=p[0],m=p[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:c.container,children:Object(v.jsxs)(b.a,{container:!0,children:[Object(v.jsx)(b.a,{item:!0,xs:7,children:Object(v.jsx)(h.a,{variant:"h6",children:t})}),Object(v.jsx)(b.a,{item:!0,xs:1}),Object(v.jsxs)(b.a,{item:!0,xs:4,children:[Object(v.jsx)(O.a,{className:c.button,variant:"contained",onClick:function(){window.open("/MS-Teams-Clone#/video-call/"+a).focus()},children:"Join Call"}),Object(v.jsx)(O.a,{className:c.button,variant:"contained",onClick:function(){return u(!l)},children:"New Meeting"})]})]})}),l&&Object(v.jsx)("form",{autoComplete:"off",children:Object(v.jsx)(k.a,{style:{marginTop:"10px"},children:Object(v.jsxs)(b.a,{container:!0,spacing:2,justify:"center",children:[Object(v.jsx)(b.a,{item:!0,xs:7,children:Object(v.jsx)(R.a,{name:"conversationName",required:!0,value:f.conversationName,label:"Meeting name",fullWidth:!0,onChange:function(e){return m(Object(C.a)(Object(C.a)({},f),{},{conversationName:e.target.value}))}})}),Object(v.jsx)(b.a,{item:!0,xs:3,children:Object(v.jsx)(O.a,{type:"submit",color:"primary",className:c.button,variant:"contained",style:{marginTop:"10px"},onClick:function(e){e.preventDefault(),r(De(f)),m(Object(C.a)(Object(C.a)({},f),{},{conversationName:""}))},children:"Start Call"})})]})})})]})},We=Object(m.a)((function(e){return{messenger:{height:"calc(100vh - 68px)",display:"flex"},chatMenu:{flex:"2.5",backgroundColor:"#eeeeee"},chatMenuTopBar:{backgroundColor:"#6264a7",padding:"12px",color:"#eeeeee",borderRight:"1px solid white"},conversationWrapper:{overflowY:"auto",height:"80vh"},chatBox:{flex:"5.5",backgroundColor:"#ffffff"},chatBoxWrapper:{display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative",height:"100 %"},chatBoxTop:{height:"68vh",overflowY:"auto",padding:"10px"},chatBoxBottom:{padding:"10px",display:"flex",alignItems:"center",justifyContent:"space-between"}}})),Pe=function(){var e,t,a=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),c=Object(d.a)(a,2),r=c[0],o=c[1],s=We(),l=Object(i.b)(),j=Object(u.f)();Object(n.useEffect)((function(){(null===r||void 0===r?void 0:r.token)||(j.push("/auth"),o(null))}),[null===r||void 0===r?void 0:r.token,j]),Object(n.useEffect)((function(){l(function(){var e=Object(F.a)(V.a.mark((function e(t){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/conversations");case 3:a=e.sent,n=a.data,t({type:"GET_ALL",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),localStorage.removeItem("currentChat")}),[l]);var p=Object(i.c)((function(e){return e.conversation})),f=Object(n.useState)(""),m=Object(d.a)(f,2),x=m[0],g=m[1],y=Object(n.useState)(!1),w=Object(d.a)(y,2),S=w[0],N=w[1];Object(n.useEffect)((function(){(function(){var e=Object(F.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N(!1),l(ze(x)).then((function(){JSON.parse(localStorage.getItem("currentChat")).conversation&&N(!0)}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,x]);var I=JSON.parse(localStorage.getItem("currentChat")),T=Object(n.useState)(""),E=Object(d.a)(T,2),A=E[0],B=E[1],D={message:A,convoId:null===(e=JSON.parse(localStorage.getItem("currentChat")))||void 0===e||null===(t=e.conversation)||void 0===t?void 0:t._id},z=Object(n.useState)({conversationName:""}),J=Object(d.a)(z,2),L=J[0],W=J[1];return Object(v.jsxs)("div",{className:s.messenger,children:[Object(v.jsxs)("div",{className:s.chatMenu,children:[Object(v.jsx)("div",{className:s.chatMenuTopBar,children:Object(v.jsx)(h.a,{variant:"h6",children:"Your Chats"})}),Object(v.jsx)("div",{className:s.conversationWrapper,children:p.length?p.map((function(e){return Object(v.jsx)("div",{onClick:function(){g(e._id)},children:Object(v.jsx)(Fe,{conversation:e},e._id)})})):Object(v.jsx)("div",{children:Object(v.jsx)(h.a,{align:"center",variant:"h6",children:"You have no chats to show"})})})]}),Object(v.jsx)("div",{className:s.chatBox,children:Object(v.jsxs)("div",{className:s.chatBoxWrapper,children:[S?Object(v.jsx)(Me,{convoName:I.conversation?I.conversation.conversationName:"",chatId:x}):Object(v.jsx)("div",{}),Object(v.jsx)("div",{className:s.chatBoxTop,children:x?Object(v.jsx)("div",{children:S&&I.messages&&I.messages.length?I.messages.map((function(e){return Object(v.jsx)(Ce,{msg:e})})):Object(v.jsx)(v.Fragment,{})}):Object(v.jsxs)("div",{children:[Object(v.jsx)(h.a,{align:"center",variant:"h6",children:"Select a Chat to view messages."}),Object(v.jsx)("form",{autoComplete:"off",children:Object(v.jsx)(k.a,{style:{marginTop:"10px"},children:Object(v.jsxs)(b.a,{container:!0,spacing:2,justify:"center",children:[Object(v.jsx)(b.a,{item:!0,xs:7,children:Object(v.jsx)(R.a,{name:"conversationName",required:!0,value:L.conversationName,label:"Meeting name",fullWidth:!0,onChange:function(e){return W(Object(C.a)(Object(C.a)({},L),{},{conversationName:e.target.value}))}})}),Object(v.jsx)(b.a,{item:!0,xs:3,children:Object(v.jsx)(O.a,{type:"submit",color:"primary",className:s.button,variant:"contained",style:{marginTop:"10px"},onClick:function(e){e.preventDefault(),l(De(L))},children:"Start Call"})})]})})})]})}),S&&x?Object(v.jsx)("div",{className:s.chatBoxBottom,children:Object(v.jsxs)(b.a,{container:!0,direction:"row",children:[Object(v.jsx)(b.a,{item:!0,xs:9,children:Object(v.jsx)(R.a,{label:"Type your message...",fullWidth:!0,value:D.message,onChange:function(e){return B(e.target.value)}})}),Object(v.jsx)(b.a,{item:!0,xs:1}),Object(v.jsx)(b.a,{item:!0,xs:2,children:Object(v.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),l(ye(D)),B("")},startIcon:Object(v.jsx)(ve.a,{fontSize:"large"}),style:{marginTop:10},fullWidth:!0,children:"Send"})})]})}):Object(v.jsx)("div",{})]})})]})},_e=function(){return Object(v.jsx)("div",{children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(w,{}),Object(v.jsxs)(u.c,{children:[Object(v.jsx)(u.a,{path:"/video-call/:id",exact:!0,children:Object(v.jsx)(fe,{children:Object(v.jsx)(Be,{})})}),Object(v.jsx)(u.a,{path:"/auth",exact:!0,component:Y}),Object(v.jsx)(u.a,{path:"/",exact:!0,component:Pe})]})]})})},Ue=(a(219),"AUTH"),Ge="LOGOUT",He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return localStorage.setItem("profile",JSON.stringify(Object(C.a)({},null===t||void 0===t?void 0:t.data))),Object(C.a)(Object(C.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data});case Ge:return localStorage.clear(),Object(C.a)(Object(C.a)({},e),{},{authData:null});default:return e}},Ye=a(76),qe="CREATE",Ke="GET_ALL",Qe="GET_CONVO",Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return[].concat(Object(Ye.a)(e),[t.payload]);case Ke:return t.payload;case Qe:return localStorage.setItem("currentChat",JSON.stringify(Object(C.a)({},null===t||void 0===t?void 0:t.payload))),e;default:return e}},Ze="SEND",$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:return[].concat(Object(Ye.a)(e),[t.payload]);default:return e}},et=Object(o.b)({auth:He,conversation:Xe,message:$e}),tt=Object(o.d)(et,Object(o.c)(Object(o.a)(s.a)));r.a.render(Object(v.jsx)(i.a,{store:tt,children:Object(v.jsx)(_e,{})}),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.1ee8220e.chunk.js.map