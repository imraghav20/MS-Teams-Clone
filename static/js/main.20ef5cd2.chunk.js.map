{"version":3,"sources":["components/TopBar.jsx","assets/ms_teams_logo_white.png","components/Input.jsx","api/index.js","actions/auth.js","views/Auth.js","assets/ding.mp3","SocketContext.js","components/CallForm.jsx","components/CallSettings.jsx","components/Notifications.jsx","actions/message.js","components/Message.jsx","components/Chat.jsx","views/VideoCall.js","actions/conversation.js","assets/chat_icon.png","components/Conversation.jsx","components/ChatTopBar.jsx","views/Chat.js","App.js","reducers/auth.js","reducers/conversation.js","reducers/message.js","reducers/index.js","index.js"],"names":["useStyles","makeStyles","theme","appBar","display","flexDirection","width","border","background","brand","alignItems","toolbar","justifyContent","profile","userName","purple","color","backgroundColor","TopBar","useState","JSON","parse","localStorage","getItem","user","setUser","dispatch","useDispatch","location","useLocation","history","useHistory","classes","logout","type","push","useEffect","token","decode","exp","Date","getTime","AppBar","className","position","Grid","container","direction","item","xs","md","src","alt","height","Typography","variant","fontFamily","Toolbar","result","Avatar","name","charAt","Button","onClick","component","Link","to","Input","handleChange","label","autoFocus","handleShowPassword","TextField","onChange","required","fullWidth","InputProps","endAdornment","InputAdornment","IconButton","Visibility","VisibilityOff","API","axios","create","baseURL","interceptors","request","use","req","headers","Authorization","signUp","formData","post","signIn","getUserConversation","chatId","get","AUTH","body","paper","marginTop","spacing","marginBottom","padding","root","margin","avatar","form","submit","googleButton","initialState","firstName","lastName","email","password","confirmPassword","Auth","setFormData","showPassword","setShowPassword","isSignUp","setIsSignUp","e","target","value","Container","maxWidth","Paper","elevation","autoComplete","onSubmit","preventDefault","a","api","data","console","log","signup","signin","prevShowPassword","justify","prevIsSignUp","style","textTransform","SocketContext","createContext","socket","io","ContextProvider","children","stream","setStream","videoStream","setVideoStream","me","setMe","call","setCall","callStarted","setCallStarted","callJoined","setCallJoined","callAccepted","setCallAccepted","callEnded","setCallEnded","setName","chatVisibility","setChatVisibility","callFull","setCallFull","roomId","useRef","window","pathname","replace","myVideo","userVideo","connectionRef","messageRef","audio","Audio","sound","navigator","mediaDevices","getUserMedia","video","then","currentStream","current","srcObject","on","id","from","callerName","signal","isReceivedCall","callUser","peer","Peer","initiator","trickle","emit","userToCall","signalData","str","TextDecoder","obj","play","hostName","Provider","startCall","num","userId","otherUserId","leaveCall","destroy","reload","answerCall","text","gridContainer","breakpoints","down","typography","wrapper","top","flexGrow","menuButton","marginRight","title","up","CallSettings","useContext","videoOn","setVideoOn","audioOn","setAudioOn","shareScreen","setShareScreen","shareStream","setShareStream","stopSharingScreen","replaceTrack","getTracks","stop","Tooltip","getVideoTracks","forEach","track","enabled","VideocamOff","fontSize","fill","Videocam","getAudioTracks","MicOff","Mic","getDisplayMedia","cursor","onended","ScreenShare","StopScreenShare","Assignment","PanTool","People","PhoneDisabled","notification","zIndex","left","transform","Notifications","sendMessage","msg","newMessage","payload","message","borderRadius","float","clear","right","middle","marginLeft","textAlign","fontWeight","time","Message","_id","senderId","join","senderName","format","createdAt","messageField","chatContainer","overflowY","Chat","setMessage","chat","messages","getMessages","map","action","date","toISOString","send","stringify","convoId","sendUserMessage","Send","button","VideoCall","meetingName","setMeetingName","conversation","conversationName","getMeetName","gutterBottom","playsInline","muted","ref","autoPlay","align","startIcon","Phone","createConversation","convo","newConvo","getConversation","conversationImg","objectFit","Conversation","chat_icon","ChatTopBar","convoName","isFormVisible","setIsFormVisible","open","focus","messenger","chatMenu","flex","chatMenuTopBar","borderRight","conversationWrapper","chatBox","chatBoxWrapper","chatBoxTop","chatBoxBottom","removeItem","conversations","useSelector","state","currentChatId","setCurrentChatId","flag","setFlag","error","setMsg","formMsgData","formCallData","setFormCallData","length","App","path","exact","LOGOUT","authReducer","authData","setItem","CREATE","GET_ALL","GET_CONVO","conversationReducer","SEND","messageReducer","reducers","combineReducers","auth","store","createStore","compose","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.20ef5cd2.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Typography, AppBar, Grid, Toolbar, Avatar, Button } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport decode from 'jwt-decode';\r\n\r\nimport ms_teams_logo_white from '../assets/ms_teams_logo_white.png';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        width: '100%',\r\n        border: '2px solid black',\r\n        background: '#0a0a0a',\r\n    },\r\n    brand: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    profile: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        width: '400px',\r\n    },\r\n    userName: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    purple: {\r\n        color: 'black',\r\n        backgroundColor: '#6264a7',\r\n    },\r\n}));\r\n\r\nconst TopBar = () => {\r\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n\r\n    const logout = () => {\r\n        dispatch({ type: \"LOGOUT\" });\r\n        history.push('/MS-Teams-Clone/auth');\r\n        setUser(null);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const token = user?.token;\r\n        if (token) {\r\n            const decodedToken = decode(token);\r\n            if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n        }\r\n        setUser(JSON.parse(localStorage.getItem('profile')));\r\n    }, [location]);\r\n\r\n    return (\r\n        <div>\r\n            <AppBar className={classes.appBar} position=\"static\">\r\n                <Grid container direction=\"row\">\r\n                    <Grid item xs={12} md={6}>\r\n                        <div className={classes.brand}>\r\n                            <img src={ms_teams_logo_white} alt=\"icon\" height=\"60\" />\r\n                            <Typography variant=\"h6\" fontFamily=\"Open Sans\">Microsoft Teams Clone</Typography>\r\n                        </div>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={6}>\r\n                        <Toolbar className={classes.toolbar}>\r\n                            {user?.result ? (\r\n                                <div className={classes.profile}>\r\n                                    <Avatar className={classes.purple} >{user?.result.name.charAt(0)}</Avatar>\r\n                                    <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\r\n                                    <Button variant=\"contained\" className={classes.logout} color=\"primary\" onClick={logout}>Logout</Button>\r\n                                </div>\r\n                            ) : (\r\n                                <Button component={Link} to=\"/MS-Teams-Clone/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\r\n                            )}\r\n                        </Toolbar>\r\n                    </Grid>\r\n                </Grid>\r\n            </AppBar>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TopBar;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAF0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA2LTE2VDIyOjI3OjIzKzA1OjMwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTA2LTE2VDIyOjI3OjIzKzA1OjMwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNi0xNlQyMjoyNzoyMyswNTozMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozOGViY2Q1Ny0zMWJhLWE4NDgtODUwNy04NTUxNzhkOWVmMzIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjY2U4MDA1OC01NjE1LTE2NGUtYmFiYS00ZjYzODI1M2FiNzIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZmJhNjNjNS03OTRmLTIxNDgtOWE4NS0wZjIwMWIxZTViN2IiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxZmJhNjNjNS03OTRmLTIxNDgtOWE4NS0wZjIwMWIxZTViN2IiIHN0RXZ0OndoZW49IjIwMjEtMDYtMTZUMjI6Mjc6MjMrMDU6MzAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzhlYmNkNTctMzFiYS1hODQ4LTg1MDctODU1MTc4ZDllZjMyIiBzdEV2dDp3aGVuPSIyMDIxLTA2LTE2VDIyOjI3OjIzKzA1OjMwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+JifMGQAAF1NJREFUeJzt3Xt8m3W9wPFv7knTpkmTXtb7/ZYtXdlYl1IoG46LioiKqMCRc8E7ynXjMgR24TbG8Ay5qC+Ro8ARxSEeFUUHY3PZBY+yrTo2nGOdYxvrtjZt0zZJc/5Y6xnKoJckT37p5/167fVql+T5fXkBn9fzPHnyRBeLxQQAVKDXegAAGCuCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQBsECoAyCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQBsECoAyCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQBsECoAyCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQBsECoAyCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQBsECoAyCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQBsECoAyCBUAZBAuAMggWAGUYtR4A+EcrVm4q9/ly59VW57S43RmFnZ09O73e3IVazwXtESxo6rY7XrH7prvnl5U5vaWlTm9Bvr3qxuvnioj4R5+j08lO7SZEKiFYSKpvPrLFV1PtnlVf52ktLnbUL73jLIOcFKd3E0vSbEh9BAsJc+ttL9nqat1zmpryFkwryKrMzDS7vvzFOdnyPoECToVgIW5WPbi5xufzzC8szK4pLnY0LF86zyXECXFEsDAhy+7a4Kmtcc6pqnLPrq11t2Rlml3XXtMiQqCQQAQLY/LgNzbV1NV5WmfMyGt3Oq35Ny86w24w6Nq1ngtTC8HCu3ryqe0LGhs9bbm59pL8vMyya7421ybsPUFjBAvy8KOv+upqc/wlJc76qkpXs8GgM1/2mRkiBAophmBNMcvvXp9fVprtbWzMa6utyWmx2Uz2L31htlmIExRAsNLcylWbKmdMz22vrclpyc625d9y05kenU7atJ4LmAiClWZ+9OOOCyvKnb5phY6aosKs2uuvfedV44DKCJbCHnl0a3NVVc7M+rrc1tJSh1dE5JJPeEUIFNIUwVLE1+942V5b425pbPS0lZc7fTaryf7FL5zOVeOYUghWilq5alNl88y8BcVFjvrcvMzyJXecnS/ECVMcwUoBy5av99TWuuZUVuY0V1e5ZzudlnzOPQH/jGAl2aKbf2soKc6qr6rOmT3Dm9fu8WQU33Jzm02v1/HOHfA+CFYSPPn0jgXeRndbrsdetuSOswstFsMCrWcCVESw4mz1N7d6vY3utuKi7PrSUqfXajVkXvbp6SIc3gGTRrAm4e57NxSWl2X7aqrdsxobc9syMkzZV3/5dBHiBCQEwRqHVd/YXDPd62mvrXW3ZDusnkU3nuHh3BOQPATrPTz939vPr6/z+PPyMssKC7Oqrv1ay/vezhdA4hCsEY9969XZFRWuGXV1ua1lI1eNf/pT3LEASCVTMlh3Ll3nqq5yz25ocPsrK1zNNpvJ/vnPzc4U4gSktCkRrPvu31Ry+uz8C0uKHfU5OfbC229rLxTiBCgnLYP142c7Liwrc/kqK1zNbretcOENXDUOpIO0C9a9KzaULLqx7WYhUEDa0Ws9QNyd+NZNYgWkobQLVkwkqvUMABIj7YIFIH0RLADKIFgAlEGwACiDYAFQBsECoAyCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQRtrdDws42b0rAiVNPs/8adMcNR53RrHNZsrU63WGwcFI6Oix0IHDh3vf3LX76Oar/v20LVrPivdHsJCWfrLmzx8999yqqxbd6HfJu94fzSL5+XZpqPdI+1nlgeHhWHTL1gPPP/fT1x+456753KIoRREspJXHvv372Zd8vPGmj13cMJ779vv1ep3MbSlqm9mUv2DtS399dv68iscSOScmhmAhbWwMdF7/+atmfVwmccdZq9W4YP68iszDb/e15+XaPxPH8RAHnHRHWnjrYO/3W/0lk4rVSfx5ufbyaDT28uqHtnrjsD3ECcGC8np6Bp+fVpBZJfG9l7/fYNC1X/2V07996+KXbXHcLiaBYEFpO3YcutvhsHgkcV884l+00P/DBG0b40SwoDSbzeSQBH9LksNh8eza3bUqkWtgbAgWlJakb0ny19a4Wx56eAvnszTGu4TA2Pg/8fHGm0TkimQsdsvil80Wi94+MBDtu3v5vKFkrKkCggWMUUF+ZtWqb2yuufZrLbvjve1f/HLX5dVV7lllZU6vxWLIvGvZ2SInDnUDIiKhUKR7797jHX/e+faGj13c8Fy811cFwQLGzt92RsknRWR5PDa26Oa1hk9e0nDrrNOmnf/BC2pF3v1cnF9ExGYzSkOD5/yGBk+riCwMBPav8fuLV8RjDpUQLGAcamrcs+OxnbUv/fXzS+446+MWi3HBOF/qFxHx+4ulry88/9e/+ct3Lr6o/tl4zKQCggWMgzPbkj/Zbeza3bVq/ryKFpncu5t+u90kF19Un71t+6Fm34z8xZOdSwW8SwiM0x1L1jsm+tqensHna2vck43Vyfy+GfnzDx3ueypO20tp7GFBIpFhCUeGt0Qiw9FIZHgoEhkeikaGB6PR4ejgYKS3qMjRYLEYT9N6zhThdzjMHhHpGe8L3zoY/P60gqxEXOTqz8+zy86dR+6vr/fcEOdtpxSClR52xWISFYlJLCYSi8WiQ0PR/t7eoe5gMHy4r2/oeG9fuKu3d7Crvz98vL8/3N3XP9QVCoWDAwPR3lAocjwUigZP9fb5vs7uZ0pLsgnWCKNBbx7va1577eCypqaCeH986GT++nqPrFu39+r29vLVCVpDcwRLe7tO/iUWk2h/fzjY3x/uPhGScDA0EO4eCEWCA4Ph4OBgJNTXF+4KBsNdvb1DXcHe8OFgMNy1fGl7SEQnOp2IiE5sNr3YbCbJzZ38gHqdzjD5raSNQGgg0jeeF6z+5lbv1V8+fb4k+Ip8EfG3t5fL0uXrn77t1jOPJHgtTRCsOIlGYzuGwtH+8NDw0NBQJBQORwfD4eFQOBwdikSig4OD0d5g71BXd/fgW8FguCsYHDrcExw8HAwOdd1+25ldo9vR6UTsdpPY7SYt/3HwHhbd6O8cz/MvvaTxVkl8rEb5r7h8xjIR+UKS1ksqgjVB+/f3/GTNT19fEgqFjw8ORkIDA9Hg8qXzQjariMi4jxiQpp58evuCyz49ozyZa5aXOX0PPLi58rprWvYkc91kIFgTdPRoaP/VXz79Na3nQHL9dW/3tory7DE//5x5Ff8iydu7GuW/4PzKL4lI2p2A57KGCdLpOa8zBQW2bXtr7VifvGTZepfHk1GSyIFOpazUmZYf1CZYwBhFo7Ghiz5S/8xYn19T7WwxGvXtiZzpVDIyTNnf+M/N9VqsnUgECxibwObN+382nhcUFWXXJGqYMfAXFzsIFjAV9feHu1tbS1aO5zX5efbKRM0zFgUnbhudVggWlJaka8QCa57b+cB4X2SzmTITMcxYZWSYJvwRolRFsKC07TsOrZORe0YlSOB3G/c9e9lnZrw4/pfG4j/NeFaPJeVurElFsKC0iz5S/8yvX/zLtyUx0Qq8ua+744zW0nEdCo7q7490x3ug8a0fHvfnHVMdwYLyzl1Q9fi3vvO/X41EhtfFcbOBDb/b90xZafZVE93AwcO9ml64+dbB4F+0XD8RCBbSwuf+47RX77rndxcfOdL/jExubysQDg+v/eEzHcvazih9cDIz/W1/d9xvpTwOgc7Ong4N108IgoW08fXFZx7zeDIuXfPTnSvD4eG1Mr5wBUQk8Pvfv/WCyaQ/59JPen8x2Xl27T62eWSOpOvtCx+77pq5affRHIKF9zUciyl18vbii+qfNZn05zz51Lbb33jj6Or3iFdARAIHDgSf+M1v93xXRFpnzZq2JF5z3Hl7e8/bb/eN64PS8bJ377FtWqybaHyWcIq5ZfFLZpNJl2E2G2wmk95sMRuzLFZjhtVqzLRajFlWqzHTZjM6rdYTP1sshoyGeo+S1/Nc9hnfiyLyoojI4q+/bCsqzKrPyjK79HqdIRSK9B482Lvn1lvaDhUWZklhYVZCZvj1i3u+c+Vnm2oluZ8nDPzPz99YPd2bl8Qlk4NgTVBsOPX2OjZt3n9nfr69Vq/TGQwGvcFg1JuNBr3FaNSbR/4Y7ry93WI06ptO3Ddr6li25OyQiPwh2ete+dmmDQfeCu4qnJaVtGDtfuPoqzctbD2QrPWSiWBNUJbDkvfAg5tqbVaj02Ix2KxWQ5bZbLBZLIYsi8VgMxgMZqNxNBYGs8motxhNerPJZLCZTHqLyWiwmUwGs9lsyNDrdYaHHt76ya8v/v/7Yk1EdVWO3+PJGO+3sCDBnnq6444brpubrL2swBP/tX3RsiWafIQx4QjWBFWUOz913TVzPxWPbcViIkajbtI30Yqm4F4fRG64bu7eTZv3r5nbUiyS2GgFfvmrNx5btqQ9lMA1NMVJ9xQQi524FzvS19yW4hVv7uvukMRdlR94bdvBtRecV/1EgrafEggWkCRlpdlXHenq75T4Ryuwr7O7o8lXkPbfTUiwgCTyuDMufe21g+O9Ruy9BDZt3r+mtGTiV+SrhGABSdbUVLD4Zz/ftbqvb+gFmXi4Ase7B5578qntt89tKV4Rz/lSGcECNHDhh2qfttvNF7zyyptPy8gFrGN8aSAWkw2/+e2e7zqzrRdP7C4S6uJdQkBDZ51VtlpEVv/oxx0X1tV5WspKnb7sbIvnH5939NjAgTffPN6xY8ehdVdc3rT2A+doem9AzRAsKG3jxs7rKyqcM6PRWDjZaxsMetOf/nR4wznnVD422W1d8gnvz0TklLdgznFZJcdVIM0zCya7lNIIFpRWUJBZOW1a1uVarX+kq2+/VmtPRZzDgtKGNb5YVuv1pxqCBUAZBAuAMggWAGUQLADKIFgAlEGwACiDYAFQBheOAgly4G/B7xUWZdVqtf72HYfXzZied7NW6ycCwQIS5cSN85P55RPvXF4knl8smxI4JATSVDrexJZgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsIE0NDER6tZ4h3ggWkKb6esPHtJ4h3ggWkKYOv923V+sZ4o1gAekpsPfN49u1HiLeCBaQhoLBoWMLb2jt1HqOeCNYQBp6fdeRjVrPkAgEC0g/gTXP7XpA6yESgWAB6SWwZcvfnl++9OyQ1oMkAsEC0sjRY6EDc+YU3aP1HIlCsIA00d0z+LN779t4qdZzJJJR6wFwwvBwLKr1DFBWoCc4eOSBVZsuv/fuc9L6vyP2sFJEUZGjYbLbiMUkEo9ZoJTAkSP9nY4sy0fuvL29R+thEo09rBSg1+vk365s+tapHh8YiPT290eODwxEgqGBcG8odOLngYFI78BAODgwEOmNRocj8+dVupM5NzQViESGh375wu7HLvxw3dNaD5MsBCt11J7qAavVKFYr/6pwwtBQdO327YfWzZpVuOTCD9dpPU5S8X8BoIZAf3+4++V1e59cv2H/M3cvnzek9UBaIFjAJESjw6cMh96gM0xgk4HRH7qODhzYv//4zn37ujs2bT743PKl7aEPXlAjH7ygZkKzpgOCBUxCOBw9ZbD27Dn6x77egZ7h2Lu/AzwcjUX7Q+Gevr7IsVB/uLcnOHSkc3+w45qvztktIuLOsYo7p0CafAUy1Q79ToVgAZNw5Eho/6kea/WXrEzmLFMBlzUAExfY+fqxtPyQcaoiWMAkXH9tyx6tZ5hKCBYwQfv29XRoPcNUQ7CAiQmse2XvlLlgM1UQLGACDh7q/csVl/vWaj3HVEOwgHEaHo5tePx7ry3Seo6piGAB4xP46fOvP3jzojMOaD3IVESwgLELrN+w75mLP1r/rNaDTFUECxibwAu/euOxM9tKH9R6kKmMK92B9xbo7R069v0nty/+4udn/UHrYaY69rCgtAl+wHgsAiIS2LR5/5rMTPOHiFVqIFhQ2u7dXa9Go7F1ctJdDiYp0NUVevZXv37j2yLSOreleEWctos44JAQSjvv3OrHReTxRx79fXNLS+GFpSUOr81mdmRkmDJ1Oml7n5cHQqFId2gg3NfXN9SzY8fb6/7wx4Mv3HJT26Hzzq1OxvgYJ4KFtPDFL8z6g4j8/bDtvvs3ljid5nyXM2OaLcOUaTEb7CIioVC4JzQQ6R0cCPe9fSTUef21/j02m1FyXDYpKc6WC84nVKmMYCEtLbyhtVNEOrWeA/HFOSwAyiBYAJRBsAAog2ABUAbBAqAMggVAGQQLgDIIFgBlpF2w9LqEfRgWgMbSLljHuwcPdXWFnpWRT9trPQ+A+Em7j+bctWz+kIh8QkTkvvs3lTT5PB+oqHD6PO7Mkpwca6GI+LWdEMBEpV2wTrbwhrmdIvL46O+337nOUVHh9E335rVXVTln26wmu9VqzBQiBihBF4vFtJ5BU998eIuvpsY9q7rKPbuy0tl80kNELEV0/OntFd7G3IVazwHtTflgvZsfPLltfl1djr8g31FVVOyo0evEIARMMwQLo9L6kHCiLr/Mt1ZE/v4lmStWBsobGzxt06fntjscVo8jy+IyGHTtGo4ITEkEawxuvN6/V0T2isgPRESWLl/vqazIbq6t9cypq3W3OBwWz8hT2QsDEohDwjhZ/dBWb329y19UmF1bWZkz02o1ZI48RMQmiUNCjGIPK06u/srpHSLScfLffe+J19qafLkL8vKzynJctnybzZgtBAyYMIKVQFd+tmmDiGwY/X3Vg5tq6utzWxsb3G35+ZllJpPBzLkwYOw4JNTQnUvXu+rrXP7yMpevujpnttttKxx5iL2wk3BIiFEEK8XcuyJQMrMp9wPlZU5fXl5muctlzZcpHjCChVEcEqaYRTf633F1/q23vWSrqc6Z5fPlzS8pcXjtGWZHRoaJc2GYkghWilu+dF5ITpwH+/u5sEce3dpcUeHy1VS751RVuUavzidgSHscEqaBRTe/ZGjyeeZXVblmFRdn1xcVZtWOPJQWEeOQEKPYw0oD9949LyoiL478ERGRe+7bWNjclHdebW1Oi8Nh87hctny9/n2/uh1IaexhTRFLlr3iqqxwNtfWeubU17lb7Xazw2DQmUWBvTD2sDCKYE1hDz281VtT7ZpTVuryVle7ZhuNevPIQykVMYKFURwSTmFf+dI/X53/+Pf+2DZzZv4Cj8dekuvJKOZ+YUglBAvv8K9XznzHO5IrV22qbGjwtDbWe9o8nowSm81k5+p8aIVg4T1df+3cPSKyR0buVLHsrvWeqkrn7IqKnBnextyzs7LMrpGnsheGhOMcFibtnvs2Fp7WnHdeSYnTO60gq8rptOSPPBSXiHEOC6PYw8Kk3bSw9YCcdHW+iMgT39/WPt3raS8qctRkZVo8djtX52PyCBYS4rNX+NaJyLrR3x96eIu3osLV3FDn8ZeXO316vY7bTmPcCBaS4itfmjP6juQPRERuWfyyebrX3V5V5ZpVWuL0TpuWWTXyVCKGU+IcFlLGPfduLDytOf+8igpns8tly/d4MkpExL/z9a6V9XXuG7SeD9ojWEhZdy5d56quypmt1+sNn/6U9wWt54H2CBYAZei1HgAAxopgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgDIIFQBkEC4AyCBYAZRAsAMogWACUQbAAKINgAVAGwQKgjP8DigsZ3yqYu+sAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport { TextField, Grid, InputAdornment, IconButton } from '@material-ui/core';\r\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\r\n\r\nconst Input = ({ name, handleChange, label, autoFocus, type, handleShowPassword }) => {\r\n    return (\r\n        <Grid item xs={12}>\r\n            <TextField\r\n                name={name}\r\n                onChange={handleChange}\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                label={label}\r\n                autoFocus={autoFocus}\r\n                type={type}\r\n                InputProps={name === \"password\" ? {\r\n                    endAdornment: (\r\n                        <InputAdornment position=\"end\">\r\n                            <IconButton onClick={handleShowPassword}>\r\n                                {type === \"password\" ? <Visibility /> : <VisibilityOff />}\r\n                            </IconButton>\r\n                        </InputAdornment>\r\n                    )\r\n                } : null}\r\n            />\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default Input;\r\n","import axios from 'axios';\r\n\r\nconst API = axios.create({baseURL: \"https://video-chat-app-imraghav20.herokuapp.com/api\"});\r\n\r\nAPI.interceptors.request.use((req) => {\r\n    if(localStorage.getItem(\"profile\")){\r\n        req.headers.Authorization = `Bearer ${JSON.parse(localStorage.getItem(\"profile\")).token}`;\r\n    }\r\n    return req;\r\n})\r\n\r\nexport const signUp = (formData) => API.post('/auth/register', formData);\r\n\r\nexport const signIn = (formData) => API.post('/auth/login', formData);\r\n\r\nexport const getConversations = () => API.get('/conversations');\r\n\r\nexport const createConversation = (newConvo) => API.post('/conversations', newConvo);\r\n\r\nexport const getUserConversation = (chatId) => API.get(`/conversations/${chatId}`);\r\n\r\nexport const sendMessage = (newMessage) => API.post('/messages', newMessage);\r\n\r\nexport const addConversation = (chatId) => API.post(`/users/${chatId}`);","import * as api from '../api/index.js';\r\n\r\nconst AUTH = \"AUTH\";\r\n\r\nexport const signin = (formData, history) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.signIn(formData);\r\n\r\n    dispatch({ type: AUTH, data });\r\n\r\n    history.push('/MS-Teams-Clone');\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const signup = (formData, history) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.signUp(formData);\r\n\r\n    dispatch({ type: AUTH, data });\r\n\r\n    history.push('/MS-Teams-Clone');\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Avatar, Button, Paper, Grid, Typography, Container } from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport Input from '../components/Input';\r\n\r\nimport { signin, signup } from '../actions/auth';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    body: {\r\n        background: '#6264a7',\r\n        height: '100vh',\r\n        width: '100vw',\r\n        position: 'fixed'\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(4),\r\n        marginBottom: theme.spacing(4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(2),\r\n    },\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n        },\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: '#6264a7',\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    googleButton: {\r\n        marginBottom: theme.spacing(2),\r\n    }\r\n}));\r\n\r\nconst initialState = { firstName: '', lastName: '', email: '', password: '', confirmPassword: '' };\r\n\r\nconst Auth = () => {\r\n    const classes = useStyles();\r\n    const [formData, setFormData] = useState(initialState);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [isSignUp, setIsSignUp] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (isSignUp) {\r\n            dispatch(signup(formData, history))\r\n        }\r\n        else {\r\n            dispatch(signin(formData, history))\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value })\r\n    };\r\n\r\n    const handleShowPassword = () => {\r\n        setShowPassword((prevShowPassword) => !prevShowPassword);\r\n    };\r\n\r\n    const switchMode = () => {\r\n        setIsSignUp((prevIsSignUp) => !prevIsSignUp);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Container component=\"main\" maxWidth=\"xs\">\r\n                    <Paper className={classes.paper} elevation={3}>\r\n                        <Avatar className={classes.avatar}>\r\n                            <LockOutlinedIcon />\r\n                        </Avatar>\r\n                        <Typography variant=\"h5\">{isSignUp ? 'Sign Up' : 'Sign In'}</Typography>\r\n                        <form autoComplete=\"off\" className={classes.form} onSubmit={handleSubmit}>\r\n                            <Grid container spacing={2}>\r\n                                {\r\n                                    isSignUp && (\r\n                                        <>\r\n                                            <Input name=\"firstName\" label=\"First Name\" handleChange={handleChange} autoFocus />\r\n                                            <Input name=\"lastName\" label=\"Last Name\" handleChange={handleChange} />\r\n                                        </>\r\n                                    )\r\n                                }\r\n                                <Input name=\"email\" label=\"Email Address\" handleChange={handleChange} type=\"email\" />\r\n                                <Input name=\"password\" label=\"Password\" handleChange={handleChange} type={showPassword ? \"text\" : \"password\"} handleShowPassword={handleShowPassword} />\r\n                                {isSignUp && (\r\n                                    <Input name=\"confirmPassword\" label=\"Confirm Password\" handleChange={handleChange} type=\"password\" />\r\n                                )}\r\n                            </Grid>\r\n                            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\r\n                                {isSignUp ? \"Sign Up\" : \"Sign In\"}\r\n                            </Button>\r\n                            <Grid container justify=\"center\">\r\n                                <Grid item>\r\n                                    <Button onClick={switchMode} style={{ textTransform: 'none' }}>\r\n                                        {isSignUp ? \"Already have an account? Sign in.\" : \"Don't have an account? Sign up.\"}\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </form>\r\n                    </Paper>\r\n                </Container>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Auth;\r\n","export default __webpack_public_path__ + \"static/media/ding.70168eef.mp3\";","import React, { createContext, useState, useRef, useEffect } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { io } from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nimport sound from './assets/ding.mp3';\r\n\r\nimport { addConversation } from './api/index';\r\n\r\nconst SocketContext = createContext();\r\n\r\nconst socket = io('https://video-chat-app-imraghav20.herokuapp.com/');\r\n// const socket = io('http://localhost:5000/');\r\n\r\nconst ContextProvider = ({ children }) => {\r\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n\r\n    const [stream, setStream] = useState(null);\r\n    const [videoStream, setVideoStream] = useState(null);\r\n    const [me, setMe] = useState('');\r\n    const [call, setCall] = useState({});\r\n    const [callStarted, setCallStarted] = useState(false);\r\n    const [callJoined, setCallJoined] = useState(false);\r\n    const [callAccepted, setCallAccepted] = useState(false);\r\n    const [callEnded, setCallEnded] = useState(false);\r\n    const [name, setName] = useState('');\r\n    const [chatVisibility, setChatVisibility] = useState(false);\r\n    const [callFull, setCallFull] = useState(false);\r\n\r\n    const roomId = useRef(window.location.pathname.replace('/MS-Teams-Clone/video-call/', ''));\r\n    const myVideo = useRef();\r\n    const userVideo = useRef();\r\n    const connectionRef = useRef();\r\n    const messageRef = useRef([]);\r\n    const audio = useRef(new Audio(sound));\r\n\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        const token = user?.token;\r\n        if (!token) {\r\n            history.push('/MS-Teams-Clone/auth');\r\n            setUser(null);\r\n        }\r\n        else {\r\n            navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n                .then((currentStream) => {\r\n                    setStream(currentStream);\r\n\r\n                    myVideo.current.srcObject = currentStream;\r\n                    setVideoStream(currentStream);\r\n                });\r\n            \r\n            setName(user.result.name);\r\n\r\n            const res = addConversation(roomId.current);\r\n\r\n            socket.on('me', (id) => {\r\n                setMe(id);\r\n            });\r\n\r\n            socket.on('callUser', ({ from, name: callerName, signal }) => {\r\n                setCall({ isReceivedCall: true, from, name: callerName, signal });\r\n            });\r\n\r\n            socket.on(\"callEnded\", () => {\r\n                connectionRef.current = null;\r\n                setCallEnded(true);\r\n                setCall({});\r\n                setCallAccepted(false);\r\n                setCallJoined(false);\r\n                setCallStarted(true);\r\n                setCallEnded(false);\r\n            });\r\n        }\r\n    }, [location]);\r\n\r\n    const startCall = () => {\r\n        socket.emit('user-wants-to-join', roomId.current);\r\n        \r\n        socket.on(\"join-response\", num => {\r\n\r\n            if(num === 0){\r\n                setCallFull(false);\r\n                setCallStarted(true);\r\n                socket.emit(\"user-joined\", {userId: me, roomId: roomId.current});\r\n            }\r\n\r\n            if(num === 1){\r\n                setCallFull(false);\r\n                socket.emit(\"other-user-id\", roomId.current);\r\n                socket.on(\"other-user\", otherUserId => {\r\n                    setCallStarted(true);\r\n                    setCallJoined(true);\r\n                    callUser(otherUserId);\r\n                });\r\n            }\r\n\r\n            if(num >= 2){\r\n                console.log(num);\r\n                setCallFull(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    const answerCall = () => {\r\n        setCallAccepted(true);\r\n\r\n        const peer = new Peer({ initiator: false, trickle: false, stream });\r\n\r\n        peer.on('signal', (data) => {\r\n            socket.emit(\"user-joined\", {userId: call.from, roomId: roomId.current});\r\n            socket.emit('answerCall', { signal: data, to: call.from, from: name });\r\n            messageRef.current.push(\r\n                { text: call.name + \" joined the chat.\" }\r\n            );\r\n            audio.current.play();\r\n        });\r\n\r\n        peer.on('stream', (currentStream) => {\r\n            userVideo.current.srcObject = currentStream;\r\n        });\r\n\r\n        peer.on('data', (data) => {\r\n            let str = new TextDecoder(\"utf-8\").decode(data);\r\n            let obj = JSON.parse(str);\r\n            messageRef.current.push(obj);\r\n            setChatVisibility(false);\r\n            setChatVisibility(true);\r\n            audio.current.play();\r\n        });\r\n\r\n        peer.signal(call.signal);\r\n        connectionRef.current = peer;\r\n    };\r\n\r\n    const callUser = (id) => {\r\n        const peer = new Peer({ initiator: true, trickle: false, stream });\r\n\r\n        peer.on('signal', (data) => {\r\n            socket.emit('callUser', { userToCall: id, signalData: data, from: me, name });\r\n        });\r\n\r\n        peer.on('stream', (currentStream) => {\r\n            userVideo.current.srcObject = currentStream;\r\n        });\r\n\r\n        peer.on('data', (data) => {\r\n            let str = new TextDecoder(\"utf-8\").decode(data);\r\n            let obj = JSON.parse(str);\r\n            messageRef.current.push(obj);\r\n            setChatVisibility(false);\r\n            setChatVisibility(true);\r\n            audio.current.play();\r\n        });\r\n\r\n        socket.on('callAccepted', (data) => {\r\n            setCallAccepted(true);\r\n            const signal = data.signal;\r\n            const hostName = data.name;\r\n            const from = data.from;\r\n            setCall({ isReceivedCall: false, from, name: hostName, signal });\r\n            peer.signal(data.signal);\r\n        });\r\n\r\n        connectionRef.current = peer;\r\n    };\r\n\r\n    const leaveCall = () => {\r\n        setCallEnded(true);\r\n\r\n        if(connectionRef.current){\r\n            connectionRef.current.destroy();\r\n        }\r\n\r\n        window.location.reload();\r\n    };\r\n\r\n    return (\r\n        <SocketContext.Provider value={{\r\n            call,\r\n            callAccepted,\r\n            callStarted,\r\n            setCallStarted,\r\n            callJoined,\r\n            callFull,\r\n            setCallJoined,\r\n            myVideo,\r\n            userVideo,\r\n            connectionRef,\r\n            messageRef,\r\n            stream,\r\n            videoStream,\r\n            chatVisibility,\r\n            setChatVisibility,\r\n            name,\r\n            setName,\r\n            callEnded,\r\n            me,\r\n            startCall,\r\n            callUser,\r\n            leaveCall,\r\n            answerCall\r\n        }}>\r\n            {children}\r\n        </SocketContext.Provider>\r\n    );\r\n};\r\n\r\nexport { ContextProvider, SocketContext };","import React, { useContext, useState } from 'react';\r\nimport { Button, TextField, Typography, Grid, Paper } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Phone } from '@material-ui/icons';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    gridContainer: {\r\n        width: '100%',\r\n        [theme.breakpoints.down('xs')]: {\r\n            flexDirection: 'column',\r\n        },\r\n    },\r\n    container: {\r\n        width: '600px',\r\n        margin: '35px 0',\r\n        padding: 0,\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '80%',\r\n        },\r\n    },\r\n    margin: {\r\n        marginTop: 10,\r\n    },\r\n    padding: {\r\n        padding: 20,\r\n    },\r\n    paper: {\r\n        margin: '10px 20px',\r\n        padding: '10px 20px',\r\n        border: '2px solid black',\r\n    },\r\n    typography: {\r\n        color: '#ffffff'\r\n    }\r\n}));\r\n\r\nconst CallForm = () => {\r\n    const { setCallStarted, setCallJoined, setName, callUser } = useContext(SocketContext);\r\n\r\n    const [idToCall, setIdToCall] = useState('');\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <Paper elevation={10} className={classes.paper}>\r\n                <Typography variant='h5' align='center'>\r\n                    Start a Call\r\n                </Typography>\r\n                <form className={classes.root} autoComplete=\"off\">\r\n                    <Grid container direction='row' align='center' justify='center' alignItems='center'>\r\n                        <Grid item xs={8}>\r\n                            <TextField label='Name' required fullWidth onChange={(e) => setName(e.target.value)} />\r\n                        </Grid>\r\n                        <Grid item xs={1}>\r\n\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                            <Button type='submit' variant=\"contained\" onClick={(e) => { e.preventDefault(); setCallStarted(true); }} color=\"primary\" startIcon={<Phone fontSize=\"large\" />} fullWidth className={classes.margin}>\r\n                                Start Call\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n            </Paper>\r\n\r\n            <Typography variant='h6' align='center' className={classes.typography}>OR</Typography>\r\n\r\n            <Paper elevation={10} className={classes.paper}>\r\n                <Typography variant='h5' align='center'>\r\n                    Join a Call\r\n                </Typography>\r\n                <form className={classes.root} autoComplete=\"off\">\r\n                    <TextField label='Name' required fullWidth onChange={(e) => setName(e.target.value)} />\r\n                    <Grid container direction='row' align='center' justify='center' alignItems='center'>\r\n                        <Grid item xs={8}>\r\n                            <TextField label='Call ID' required fullWidth onChange={(e) => setIdToCall(e.target.value)} />\r\n                        </Grid>\r\n                        <Grid item xs={1}>\r\n\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                            <Button type='submit' variant=\"contained\" color=\"primary\" onClick={(e) => { e.preventDefault(); setCallStarted(true); setCallJoined(true); callUser(idToCall); }} startIcon={<Phone fontSize=\"large\" />} fullWidth className={classes.margin}>\r\n                                Join Call\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n            </Paper>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CallForm;\r\n","import React, { useContext, useState } from 'react';\r\nimport { AppBar, Toolbar, IconButton, Tooltip } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { VideocamOff, Videocam, Mic, MicOff, ScreenShare, StopScreenShare, PanTool, Chat, People, PhoneDisabled, Assignment } from '@material-ui/icons';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    wrapper: {\r\n        margin: 'auto',\r\n        width: 'fit-content'\r\n    },\r\n    appBar: {\r\n        top: 'auto',\r\n        background: '#0a0a0a',\r\n        width: 'fit-content',\r\n        alignItems: 'center',\r\n        position: 'inherit',\r\n        border: '1px solid white',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        display: 'none',\r\n        [\r\n            theme.breakpoints.up('sm')]: {\r\n            display: 'block',\r\n        },\r\n    },\r\n}));\r\n\r\nconst CallSettings = () => {\r\n    const classes = useStyles();\r\n    const { callStarted, me, stream, leaveCall, myVideo, videoStream, connectionRef, chatVisibility, setChatVisibility } = useContext(SocketContext);\r\n    const [videoOn, setVideoOn] = useState(true);\r\n    const [audioOn, setAudioOn] = useState(true);\r\n    const [shareScreen, setShareScreen] = useState(false);\r\n    const [shareStream, setShareStream] = useState(null);\r\n\r\n    const offCamera = () => {\r\n        var vidTrack = stream.getVideoTracks();\r\n        vidTrack.forEach(track => track.enabled = false);\r\n    }\r\n\r\n    const onCamera = () => {\r\n        var vidTrack = stream.getVideoTracks();\r\n        vidTrack.forEach(track => track.enabled = true);\r\n    }\r\n\r\n    const offMic = () => {\r\n        var audTrack = stream.getAudioTracks();\r\n        audTrack.forEach(track => track.enabled = false);\r\n    }\r\n\r\n    const onMic = () => {\r\n        var audTrack = stream.getAudioTracks();\r\n        audTrack.forEach(track => track.enabled = true);\r\n    }\r\n\r\n    const shareUserScreen = () => {\r\n        navigator.mediaDevices.getDisplayMedia({ cursor: true })\r\n            .then((currentStream) => {\r\n                setShareStream(currentStream);\r\n\r\n                if (connectionRef.current) {\r\n                    connectionRef.current.replaceTrack(stream.getTracks()[1], currentStream.getTracks()[0], stream);\r\n                }\r\n\r\n                myVideo.current.srcObject = currentStream;\r\n                setShareScreen(true);\r\n\r\n                currentStream.getTracks()[0].onended = () => {\r\n                    stopSharingScreen();\r\n                }\r\n            });\r\n    }\r\n\r\n    const stopSharingScreen = () => {\r\n        if (connectionRef.current) {\r\n            connectionRef.current.replaceTrack(stream.getTracks()[1], videoStream.getTracks()[1], stream);\r\n        }\r\n        myVideo.current.srcObject = videoStream;\r\n\r\n        if (shareStream) {\r\n            shareStream.getTracks()[0].stop();\r\n        }\r\n\r\n        setShareScreen(false);\r\n    }\r\n\r\n    return (\r\n        <div className={classes.wrapper}>\r\n            <AppBar className={classes.appBar} position='fixed'>\r\n                <Toolbar>\r\n                    {\r\n                        videoOn && (\r\n                            <Tooltip title='Turn Camera Off'>\r\n                                <IconButton onClick={() => { setVideoOn(false); offCamera(); }}>\r\n                                    <VideocamOff fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        )\r\n                    }\r\n                    {\r\n                        !videoOn && (\r\n                            <Tooltip title='Turn Camera On'>\r\n                                <IconButton onClick={() => { setVideoOn(true); onCamera(); }}>\r\n                                    <Videocam fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        )\r\n                    }\r\n                    {\r\n                        audioOn && (\r\n                            <Tooltip title='Turn Mic Off'>\r\n                                <IconButton onClick={() => { setAudioOn(false); offMic(); }}>\r\n                                    <MicOff fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        )\r\n                    }\r\n                    {\r\n                        !audioOn && (\r\n                            <Tooltip title='Turn Mic On'>\r\n                                <IconButton onClick={() => { setAudioOn(true); onMic(); }}>\r\n                                    <Mic fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        )\r\n                    }\r\n                    {\r\n                        callStarted && (\r\n                            <div>\r\n                                {\r\n                                    !shareScreen && (\r\n                                        <Tooltip title='Share Your Screen'>\r\n                                            <IconButton onClick={() => { shareUserScreen(); }}>\r\n                                                <ScreenShare fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    )\r\n                                }\r\n                                {\r\n                                    shareScreen && (\r\n                                        <Tooltip title='Stop Sharing'>\r\n                                            <IconButton onClick={() => { stopSharingScreen(); }}>\r\n                                                <StopScreenShare fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    )\r\n                                }\r\n                                <Tooltip title='Copy Meet ID'>\r\n                                    <CopyToClipboard text={me}>\r\n                                        <IconButton>\r\n                                            <Assignment fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                        </IconButton>\r\n                                    </CopyToClipboard>\r\n                                </Tooltip>\r\n                                <Tooltip title='Raise Hand'>\r\n                                    <IconButton>\r\n                                        <PanTool fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                                <Tooltip title='Show Conversation'>\r\n                                    <IconButton onClick={() => { setChatVisibility(!chatVisibility); }}>\r\n                                        <Chat fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                                <Tooltip title='Show Participants'>\r\n                                    <IconButton>\r\n                                        <People fontSize=\"large\" style={{ fill: \"white\" }} />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                                <Tooltip title='Leave Call'>\r\n                                    <IconButton onClick={leaveCall}>\r\n                                        <PhoneDisabled fontSize=\"large\" style={{ fill: \"red\" }} />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                            </div>\r\n                        )\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CallSettings;\r\n","import React, { useContext } from 'react';\r\nimport { Button, Paper } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    notification: {\r\n        zIndex: '2000',\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)'\r\n    },\r\n    paper: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: '10px'\r\n    }\r\n}));\r\n\r\nconst Notifications = () => {\r\n    const { answerCall, call, callAccepted, callJoined, callFull } = useContext(SocketContext);\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.notification}>\r\n            {call.isReceivedCall && !callAccepted && (\r\n                <Paper className={classes.paper}>\r\n                    <h1>{call.name} is calling: &nbsp; &nbsp; &nbsp;</h1>\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\r\n                        Answer\r\n                    </Button>\r\n                </Paper>\r\n            )}\r\n\r\n            {callJoined && !callAccepted && (\r\n                <Paper className={classes.paper}>\r\n                    <h1>Waiting for host to let you in...</h1>\r\n                </Paper>\r\n            )}\r\n\r\n            {callFull && (\r\n                <Paper className={classes.paper}>\r\n                    <h1>The call is currently full. Please join later.</h1>\r\n                </Paper>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Notifications;\r\n","import * as api from '../api/index.js';\r\n\r\nconst SEND = \"SEND\";\r\n\r\nexport const sendMessage = (msg) => async (dispatch) => {\r\n    try {\r\n        const { data } = await api.sendMessage(msg);\r\n        dispatch({ type: SEND, payload: data });\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { format } from \"timeago.js\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    message: {\r\n        maxWidth: '60%',\r\n        padding: '10px 20px',\r\n        margin: '5px',\r\n        border: '1px solid black',\r\n        borderRadius: '5px',\r\n        fontFamily: 'sans-serif'\r\n    },\r\n    left: {\r\n        float: 'left',\r\n        clear: 'both',\r\n        backgroundColor: '#eeeeee',\r\n    },\r\n    right: {\r\n        float: 'right',\r\n        clear: 'both',\r\n        backgroundColor: '#6264a7',\r\n        color: 'white'\r\n    },\r\n    middle: {\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        textAlign: 'center',\r\n        clear: 'both',\r\n        backgroundColor: 'lightblue'\r\n    },\r\n    userName: {\r\n        fontWeight: 'bold'\r\n    },\r\n    time: {\r\n        fontSize: '12px',\r\n        textAlign: 'right'\r\n    }\r\n}))\r\n\r\nconst Message = ({msg}) => {\r\n    const classes = useStyles();\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n    const direction = user?.result._id === msg.senderId ? classes.right : classes.left;\r\n    return (\r\n        <div className={[classes.message, direction].join(' ')}>\r\n            <div className={classes.userName}>{msg.senderName}</div>\r\n            <p>{msg.text}</p>\r\n            <div className={classes.time}>{format(msg.createdAt)}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Message;\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Tooltip, IconButton, Paper, TextField } from '@material-ui/core';\r\nimport { Send } from '@material-ui/icons';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\nimport { getUserConversation } from '../api/index';\r\nimport { sendMessage } from '../actions/message';\r\n\r\nimport Message from './Message';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        padding: '10px',\r\n        height: '85vh',\r\n        width: '20vw',\r\n        border: '1px solid black',\r\n        zIndex: '3000',\r\n        position: 'absolute',\r\n        top: '10vh',\r\n        right: '0',\r\n    },\r\n    messageField: {\r\n        width: '78%'\r\n    },\r\n    chatContainer: {\r\n        height: '78vh',\r\n        overflowY: 'auto'\r\n    },\r\n    message: {\r\n        width: '60%',\r\n        padding: '5px',\r\n        margin: '5px',\r\n        border: '1px solid black',\r\n        borderRadius: '5px'\r\n    },\r\n    left: {\r\n        float: 'left',\r\n        clear: 'both',\r\n        backgroundColor: 'white',\r\n    },\r\n    right: {\r\n        float: 'right',\r\n        clear: 'both',\r\n        backgroundColor: '#6264a7',\r\n        color: 'white'\r\n    },\r\n    middle: {\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        textAlign: 'center',\r\n        clear: 'both',\r\n        backgroundColor: 'lightblue'\r\n    }\r\n}));\r\n\r\nconst Chat = () => {\r\n    const { chatVisibility, messageRef, connectionRef, name } = useContext(SocketContext);\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        const getMessages = async () => {\r\n            const chatId = window.location.pathname.replace('/MS-Teams-Clone/video-call/', '');\r\n            const chat = await getUserConversation(chatId);\r\n            messageRef.current = chat.data.messages;\r\n        }\r\n        getMessages();\r\n    }, []);\r\n\r\n    const sendUserMessage = () => {\r\n        if (message) {\r\n            const date = new Date();\r\n\r\n            const msg =  {\r\n                text: message,\r\n                senderName: name,\r\n                senderId: JSON.parse(localStorage.getItem('profile')).result._id,\r\n                createdAt: date.toISOString()\r\n            }\r\n            \r\n            messageRef.current.push(msg);\r\n\r\n            if (connectionRef.current) {\r\n                connectionRef.current.send(JSON.stringify(msg));\r\n            }\r\n\r\n            dispatch(sendMessage({\r\n                message: message,\r\n                convoId: window.location.pathname.replace('/MS-Teams-Clone/video-call/', '')\r\n            }));\r\n\r\n            setMessage('');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                chatVisibility && (\r\n                    <Paper className={classes.paper}>\r\n                        <div id=\"chat-container\" className={classes.chatContainer}>\r\n                            {\r\n                                messageRef.current.map((msg) => <Message msg={msg} />)\r\n                            }\r\n                        </div>\r\n                        <form action='#' autoComplete=\"off\">\r\n                            <TextField label=\"Type Message\" value={message} name=\"messageInp\" id=\"messageInp\" className={classes.messageField} onChange={(e) => setMessage(e.target.value)} />\r\n                            <Tooltip title='Send Message'>\r\n                                <IconButton type='submit' color='primary' onClick={(e) => { e.preventDefault(); sendUserMessage(); }}>\r\n                                    <Send fontSize=\"large\" />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </form>\r\n                    </Paper>\r\n                )\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { Button, Typography, Grid } from '@material-ui/core';\r\nimport { Phone } from '@material-ui/icons'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport CallForm from '../components/CallForm';\r\nimport CallSettings from '../components/CallSettings';\r\nimport Notifications from '../components/Notifications';\r\nimport Chat from '../components/Chat';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\nimport { getUserConversation } from '../api/index';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    wrapper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: '100%',\r\n    },\r\n    video: {\r\n        width: '50vw',\r\n        height: '78vh',\r\n        border: '2px solid black',\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '300px',\r\n        },\r\n    },\r\n    typography: {\r\n        zIndex: '1000',\r\n        position: 'absolute',\r\n        border: '2px solid black',\r\n        background: '#eeeeee',\r\n        padding: '5px 5px'\r\n    },\r\n    button: {\r\n        marginTop: 10,\r\n        marginRight: 'auto',\r\n        marginLeft: 'auto',\r\n        width: 'fit-content'\r\n    },\r\n}))\r\n\r\nconst VideoCall = () => {\r\n    const { name, callAccepted, callStarted, startCall, myVideo, userVideo, callEnded, stream, call } = useContext(SocketContext);\r\n    const classes = useStyles();\r\n    const [meetingName, setMeetingName] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        const getMeetName = async () => {\r\n            const roomId = window.location.pathname.replace('/MS-Teams-Clone/video-call/', '');\r\n            const chat = await getUserConversation(roomId);\r\n            setMeetingName(chat.data.conversation.conversationName);\r\n        }\r\n\r\n        getMeetName();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <Grid container xs={12} direction='row' justify='center'>\r\n                <Grid container xs={6}>\r\n                    {\r\n                        stream && (\r\n                            <Grid item xs={12} md={6}>\r\n                                <Typography className={classes.typography} variant='h5' gutterBottom>{name || 'Name'}</Typography>\r\n                                <video playsInline muted ref={myVideo} autoPlay className={classes.video} />\r\n                            </Grid>\r\n                        )\r\n                    }\r\n                </Grid>\r\n                {\r\n                    !callAccepted && !callStarted && (<Grid container xs={6} direction='column' justify='center' align='center'>\r\n                        <Typography variant='h4' gutterBottom>{meetingName}</Typography>\r\n                        <Button variant=\"contained\" onClick={() => { startCall() }} startIcon={<Phone fontSize=\"large\" />} className={classes.button}>\r\n                            Join Call\r\n                        </Button>\r\n                    </Grid>)\r\n                }\r\n                {\r\n                    callAccepted && !callEnded && (\r\n                        <Grid item xs={12} md={6}>\r\n                            <Typography className={classes.typography} variant='h5' gutterBottom>{call.name || 'Name'}</Typography>\r\n                            <video playsInline ref={userVideo} autoPlay className={classes.video} />\r\n                        </Grid>\r\n                    )\r\n                }\r\n            </Grid>\r\n            <Chat />\r\n            <CallSettings />\r\n            <Notifications />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VideoCall;\r\n","import * as api from '../api/index.js';\r\n\r\nconst GET_ALL = \"GET_ALL\";\r\nconst CREATE = \"CREATE\";\r\nconst GET_CONVO = \"GET_CONVO\";\r\n\r\nexport const getUserConversations = () => async (dispatch) => {\r\n    try {\r\n        const { data } = await api.getConversations();\r\n        dispatch({ type: GET_ALL, payload: data });\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport const createConversation = (convo) => async (dispatch) => {\r\n    try {\r\n        const { data } = await api.createConversation(convo);\r\n        dispatch({ type: CREATE, payload: data });\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport const getConversation = (chatId) => async (dispatch) => {\r\n    try {\r\n        const { data } = await api.getUserConversation(chatId);\r\n        dispatch({ type: GET_CONVO, payload: data });\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/chat_icon.f223e380.png\";","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport chat_icon from '../assets/chat_icon.png';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    conversation: {\r\n        display: 'flex',\r\n        backgroundColor: '#eeeeee',\r\n        alignItems: 'center',\r\n        padding: '10px',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            backgroundColor: '#ffffff'\r\n        }\r\n    },\r\n\r\n    conversationImg: {\r\n        width: '40px',\r\n        height: '40px',\r\n        borderRadius: '50%',\r\n        objectFit: 'cover',\r\n        marginRight: '20px'\r\n    },\r\n\r\n    conversationName: {\r\n        fontWeight: 'bold',\r\n        fontFamily: 'sans-serif'\r\n    }\r\n}))\r\n\r\nconst Conversation = (conversation) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.conversation}>\r\n            <img className={classes.conversationImg} src={chat_icon} />\r\n            <span className={classes.conversationName}>{conversation.conversation.conversationName}</span>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Conversation;\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Paper, Typography, Grid, Button, TextField } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { createConversation } from '../actions/conversation';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        backgroundColor: '#6264a7',\r\n        color: '#ffffff',\r\n        padding: '10px'\r\n    },\r\n    button: {\r\n        margin: '0px 4px'\r\n    }\r\n}))\r\n\r\nconst ChatTopBar = ({ convoName, chatId }) => {\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n\r\n    const [isFormVisible, setIsFormVisible] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        conversationName: \"\"\r\n    });\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        dispatch(createConversation(formData));\r\n        setFormData({ ...formData, conversationName: \"\" });\r\n    }\r\n\r\n    const redirectToVideo = () => {\r\n        const win = window.open('/MS-Teams-Clone/video-call/' + chatId);\r\n        win.focus();\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.container}>\r\n                <Grid container>\r\n                    <Grid item xs={7}>\r\n                        <Typography variant='h6'>\r\n                            {convoName}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={1}>\r\n\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Button className={classes.button} variant='contained' onClick={redirectToVideo}>Join Call</Button>\r\n                        <Button className={classes.button} variant='contained' onClick={() => setIsFormVisible(!isFormVisible)}>New Meeting</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n            {\r\n                isFormVisible && (\r\n                    <form autoComplete=\"off\">\r\n                        <Paper style={{ marginTop: '10px' }}>\r\n                            <Grid container spacing={2} justify=\"center\">\r\n                                <Grid item xs={7}>\r\n                                    <TextField name=\"conversationName\" required value={formData.conversationName} label=\"Meeting name\" fullWidth onChange={(e) => setFormData({ ...formData, conversationName: e.target.value })} />\r\n                                </Grid>\r\n                                <Grid item xs={3}>\r\n                                    <Button type=\"submit\" color=\"primary\" className={classes.button} variant='contained' style={{ marginTop: '10px' }} onClick={handleSubmit}>Start Call</Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Paper>\r\n                    </form>\r\n                )\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatTopBar;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Typography, Button, TextField, Grid, Paper } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Send } from '@material-ui/icons';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { getUserConversations, getConversation, createConversation } from '../actions/conversation';\r\nimport { sendMessage } from '../actions/message';\r\n\r\nimport Conversation from '../components/Conversation';\r\nimport Message from '../components/Message';\r\nimport ChatTopBar from '../components/ChatTopBar';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    messenger: {\r\n        height: 'calc(100vh - 68px)',\r\n        display: 'flex',\r\n    },\r\n\r\n    chatMenu: {\r\n        flex: '2.5',\r\n        backgroundColor: '#eeeeee'\r\n    },\r\n\r\n    chatMenuTopBar: {\r\n        backgroundColor: '#6264a7',\r\n        padding: '12px',\r\n        color: '#eeeeee',\r\n        borderRight: '1px solid white'\r\n    },\r\n\r\n    conversationWrapper: {\r\n        overflowY: 'auto',\r\n        height: '80vh'\r\n    },\r\n\r\n    chatBox: {\r\n        flex: '5.5',\r\n        backgroundColor: '#ffffff'\r\n    },\r\n\r\n    chatBoxWrapper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        position: 'relative',\r\n        height: '100 %',\r\n    },\r\n\r\n    chatBoxTop: {\r\n        height: '68vh',\r\n        overflowY: 'auto',\r\n        padding: '10px'\r\n    },\r\n\r\n    chatBoxBottom: {\r\n        padding: '10px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between'\r\n    }\r\n\r\n}))\r\n\r\nconst Chat = () => {\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(getUserConversations());\r\n        localStorage.removeItem(\"currentChat\");\r\n    }, [dispatch]);\r\n\r\n    const conversations = useSelector((state) => state.conversation);\r\n\r\n    const [currentChatId, setCurrentChatId] = useState(\"\");\r\n    const [flag, setFlag] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const getMessages = async () => {\r\n            try {\r\n                setFlag(false);\r\n                dispatch(getConversation(currentChatId))\r\n                .then(() => {\r\n                    const chat =  JSON.parse(localStorage.getItem('currentChat'));\r\n                    if(chat.conversation){\r\n                        setFlag(true);\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        getMessages();\r\n    }, [dispatch, currentChatId]);\r\n\r\n    const conversation = JSON.parse(localStorage.getItem('currentChat'));\r\n\r\n    const [msg, setMsg] = useState(\"\");\r\n    const formMsgData = {\r\n        message: msg,\r\n        convoId: JSON.parse(localStorage.getItem('currentChat'))?.conversation?._id\r\n    }\r\n\r\n    const [formCallData, setFormCallData] = useState({\r\n        conversationName: \"\"\r\n    });\r\n\r\n    const handleCallSubmit = (e) => {\r\n        e.preventDefault();\r\n        dispatch(createConversation(formCallData));\r\n    }\r\n\r\n    const handleMessageSubmit = (e) => {\r\n        e.preventDefault();\r\n        dispatch(sendMessage(formMsgData));\r\n        setMsg(\"\");\r\n    }\r\n\r\n    return (\r\n        <div className={classes.messenger}>\r\n            <div className={classes.chatMenu}>\r\n                <div className={classes.chatMenuTopBar}>\r\n                    <Typography variant='h6'>Your Chats</Typography>\r\n                </div>\r\n                <div className={classes.conversationWrapper}>\r\n                    {\r\n                        !conversations.length ? (\r\n                            <div>\r\n                                <Typography align='center' variant='h6'>You have no chats to show</Typography>\r\n                            </div>\r\n                        )\r\n                            : (\r\n                                conversations.map((convo) => (\r\n                                    <div onClick={() => { setCurrentChatId(convo._id); }}>\r\n                                        <Conversation key={convo._id} conversation={convo} />\r\n                                    </div>))\r\n                            )\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className={classes.chatBox}>\r\n                <div className={classes.chatBoxWrapper}>\r\n                    {\r\n                        !flag ? <div></div>\r\n                            : (<ChatTopBar convoName={conversation.conversation ? conversation.conversation.conversationName : \"\"} chatId={currentChatId}/>)\r\n                    }\r\n                    <div className={classes.chatBoxTop}>\r\n                        {\r\n                            !currentChatId ? (\r\n                                <div>\r\n                                    <Typography align='center' variant='h6'>Select a Chat to view messages.</Typography>\r\n                                    <form autoComplete=\"off\">\r\n                                        <Paper style={{ marginTop: '10px' }}>\r\n                                            <Grid container spacing={2} justify=\"center\">\r\n                                                <Grid item xs={7}>\r\n                                                    <TextField name=\"conversationName\" required value={formCallData.conversationName} label=\"Meeting name\" fullWidth onChange={(e) => setFormCallData({ ...formCallData, conversationName: e.target.value })} />\r\n                                                </Grid>\r\n                                                <Grid item xs={3}>\r\n                                                    <Button type=\"submit\" color=\"primary\" className={classes.button} variant='contained' style={{ marginTop: '10px' }} onClick={handleCallSubmit}>Start Call</Button>\r\n                                                </Grid>\r\n                                            </Grid>\r\n                                        </Paper>\r\n                                    </form>\r\n                                </div>)\r\n                                : (\r\n                                    <div>\r\n                                        {\r\n                                            (!flag || !conversation.messages || !conversation.messages.length) ? <></>\r\n                                                : (\r\n                                                    conversation.messages.map((msg) => (\r\n                                                        <Message msg={msg} />\r\n                                                    ))\r\n                                                )\r\n                                        }\r\n                                    </div>\r\n                                )\r\n                        }\r\n                    </div>\r\n                    {\r\n                        (!flag || !currentChatId) ? <div></div>\r\n                            : (\r\n                                <div className={classes.chatBoxBottom}>\r\n                                    <Grid container direction='row'>\r\n                                        <Grid item xs={9}>\r\n                                            <TextField label=\"Type your message...\" fullWidth value={formMsgData.message} onChange={(e) => setMsg(e.target.value)} />\r\n                                        </Grid>\r\n                                        <Grid item xs={1}>\r\n\r\n                                        </Grid>\r\n                                        <Grid item xs={2}>\r\n                                            <Button type='submit' variant=\"contained\" color=\"primary\" onClick={handleMessageSubmit} startIcon={<Send fontSize=\"large\" />} style={{ marginTop: 10 }} fullWidth>\r\n                                                Send\r\n                                            </Button>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </div>\r\n                            )\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;\r\n","import React from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\n\r\nimport TopBar from './components/TopBar';\r\n\r\nimport Auth from './views/Auth';\r\nimport VideoCall from './views/VideoCall';\r\nimport Chat from './views/Chat';\r\n\r\nimport { ContextProvider } from './SocketContext';\r\n\r\nconst App = () => {\r\n    return (\r\n        <div>\r\n            <BrowserRouter>\r\n                <TopBar />\r\n                <Switch>\r\n                    <Route path='/MS-Teams-Clone/video-call/:id' exact>\r\n                        <ContextProvider>\r\n                            <VideoCall />\r\n                        </ContextProvider>\r\n                    </Route>\r\n                    <Route path='/MS-Teams-Clone/auth' exact component={Auth} />\r\n                    <Route path='/MS-Teams-Clone/' exact component={Chat} />\r\n                </Switch>\r\n            </BrowserRouter>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","const AUTH = \"AUTH\";\r\nconst LOGOUT = \"LOGOUT\";\r\n\r\nconst authReducer = (state = {authData: null}, action) => {\r\n    switch(action.type){\r\n        case AUTH:\r\n            localStorage.setItem('profile', JSON.stringify({...action?.data}));\r\n            return {...state, authData: action?.data};\r\n        case LOGOUT:\r\n            localStorage.clear();\r\n            return {...state, authData: null};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default authReducer;","const CREATE = \"CREATE\";\r\nconst GET_ALL = \"GET_ALL\";\r\nconst GET_CONVO = \"GET_CONVO\";\r\n\r\nconst conversationReducer = (state = [], action) => {\r\n    switch(action.type){\r\n        case CREATE:\r\n            return [...state, action.payload];\r\n        case GET_ALL:\r\n            return action.payload;\r\n        case GET_CONVO:\r\n            localStorage.setItem('currentChat', JSON.stringify({...action?.payload}));\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default conversationReducer;","const SEND = \"SEND\";\r\n\r\nconst messageReducer = (state = [], action) => {\r\n    switch(action.type) {\r\n        case SEND:\r\n            return [...state, action.payload];\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default messageReducer;","import { combineReducers } from 'redux';\r\n\r\nimport auth from './auth';\r\nimport conversation from './conversation';\r\nimport message from './message';\r\n\r\nexport const reducers = combineReducers({ auth, conversation, message });","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport App from './App';\r\nimport './styles.css';\r\n\r\nimport { reducers } from './reducers';\r\n\r\nconst store = createStore(reducers, compose(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}