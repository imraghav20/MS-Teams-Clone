(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{141:function(e,t){},143:function(e,t){},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(10),c=a.n(i),r=a(27),l=a(196),s=a(191),o=a(192),j=a(187),d=a(11),b=a(160),u=a(211),h=a(194),f=a(195),O=a(89),x=a(60),p=a.n(x),m=a.p+"static/media/ding.70168eef.mp3",g=a(2),v=Object(n.createContext)(),y=Object(O.io)("https://video-chat-app-imraghav20.herokuapp.com/"),C=function(e){var t=e.children,a=Object(n.useState)(null),i=Object(d.a)(a,2),c=i[0],r=i[1],l=Object(n.useState)(null),s=Object(d.a)(l,2),o=s[0],j=s[1],b=Object(n.useState)(""),u=Object(d.a)(b,2),h=u[0],f=u[1],O=Object(n.useState)({}),x=Object(d.a)(O,2),C=x[0],w=x[1],k=Object(n.useState)(!1),S=Object(d.a)(k,2),N=S[0],T=S[1],R=Object(n.useState)(!1),z=Object(d.a)(R,2),I=z[0],D=z[1],V=Object(n.useState)(!1),A=Object(d.a)(V,2),B=A[0],E=A[1],J=Object(n.useState)(!1),M=Object(d.a)(J,2),W=M[0],U=M[1],P=Object(n.useState)(""),q=Object(d.a)(P,2),F=q[0],G=q[1],L=Object(n.useState)(!1),Y=Object(d.a)(L,2),H=Y[0],K=Y[1],Q=Object(n.useRef)(),X=Object(n.useRef)(),Z=Object(n.useRef)(),$=Object(n.useRef)([]),_=Object(n.useRef)(new Audio(m));Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),Q.current.srcObject=e,j(e)})),y.on("me",(function(e){f(e)})),y.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;w({isReceivedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(g.jsx)(v.Provider,{value:{call:C,callAccepted:B,callStarted:N,setCallStarted:T,callJoined:I,setCallJoined:D,myVideo:Q,userVideo:X,connectionRef:Z,messageRef:$,stream:c,videoStream:o,chatVisibility:H,setChatVisibility:K,name:F,setName:G,callEnded:W,me:h,callUser:function(e){var t=new p.a({initiator:!0,trickle:!1,stream:c});t.on("signal",(function(t){y.emit("callUser",{userToCall:e,signalData:t,from:h,name:F})})),t.on("stream",(function(e){X.current.srcObject=e})),t.on("data",(function(e){var t=new TextDecoder("utf-8").decode(e);$.current.push({message:t,position:"left"}),K(!1),K(!0),_.current.play()})),y.on("callAccepted",(function(e){E(!0);var a=e.signal,n=e.name,i=e.from;w({isReceivedCall:!1,from:i,name:n,signal:a}),t.signal(e.signal)})),Z.current=t},leaveCall:function(){U(!0),Z.current.destroy(),window.location.reload()},answerCall:function(){E(!0);var e=new p.a({initiator:!1,trickle:!1,stream:c});e.on("signal",(function(e){y.emit("answerCall",{signal:e,to:C.from,from:F}),$.current.push({message:C.name+" joined the chat.",position:"middle"}),_.current.play()})),e.on("stream",(function(e){X.current.srcObject=e})),e.on("data",(function(e){var t=new TextDecoder("utf-8").decode(e);$.current.push({message:t,position:"left"}),K(!1),K(!0),_.current.play()})),e.signal(C.signal),Z.current=e}},children:t})},w=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:10},padding:{padding:20},paper:{margin:"10px 20px",padding:"10px 20px",border:"2px solid black"},typography:{color:"#ffffff"}}})),k=function(){var e=Object(n.useContext)(v),t=e.setCallStarted,a=e.setCallJoined,i=e.setName,c=e.callUser,r=Object(n.useState)(""),l=Object(d.a)(r,2),j=l[0],O=l[1],x=w();return Object(g.jsxs)("div",{children:[Object(g.jsxs)(b.a,{elevation:10,className:x.paper,children:[Object(g.jsx)(s.a,{variant:"h5",align:"center",children:"Start a Call"}),Object(g.jsx)("form",{className:x.root,autoComplete:"off",children:Object(g.jsxs)(o.a,{container:!0,direction:"row",align:"center",justify:"center",alignItems:"center",children:[Object(g.jsx)(o.a,{item:!0,xs:8,children:Object(g.jsx)(u.a,{label:"Name",required:!0,fullWidth:!0,onChange:function(e){return i(e.target.value)}})}),Object(g.jsx)(o.a,{item:!0,xs:1}),Object(g.jsx)(o.a,{item:!0,xs:3,children:Object(g.jsx)(h.a,{type:"submit",variant:"contained",onClick:function(e){e.preventDefault(),t(!0)},color:"primary",startIcon:Object(g.jsx)(f.a,{fontSize:"large"}),fullWidth:!0,className:x.margin,children:"Start Call"})})]})})]}),Object(g.jsx)(s.a,{variant:"h6",align:"center",className:x.typography,children:"OR"}),Object(g.jsxs)(b.a,{elevation:10,className:x.paper,children:[Object(g.jsx)(s.a,{variant:"h5",align:"center",children:"Join a Call"}),Object(g.jsxs)("form",{className:x.root,autoComplete:"off",children:[Object(g.jsx)(u.a,{label:"Name",required:!0,fullWidth:!0,onChange:function(e){return i(e.target.value)}}),Object(g.jsxs)(o.a,{container:!0,direction:"row",align:"center",justify:"center",alignItems:"center",children:[Object(g.jsx)(o.a,{item:!0,xs:8,children:Object(g.jsx)(u.a,{label:"Call ID",required:!0,fullWidth:!0,onChange:function(e){return O(e.target.value)}})}),Object(g.jsx)(o.a,{item:!0,xs:1}),Object(g.jsx)(o.a,{item:!0,xs:3,children:Object(g.jsx)(h.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),t(!0),a(!0),c(j)},startIcon:Object(g.jsx)(f.a,{fontSize:"large"}),fullWidth:!0,className:x.margin,children:"Join Call"})})]})]})]})]})},S=a(197),N=a(213),T=a(198),R=a(199),z=a(200),I=a(201),D=a(202),V=a(203),A=a(204),B=a(205),E=a(206),J=a(207),M=a(208),W=a(209),U=a(95),P=Object(j.a)((function(e){return{wrapper:{margin:"auto",width:"fit-content"},appBar:{top:"auto",background:"#0a0a0a",width:"fit-content",alignItems:"center",position:"inherit",border:"1px solid white"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(r.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"})}})),q=function(){var e=P(),t=Object(n.useContext)(v),a=t.callStarted,i=t.me,c=t.stream,r=t.leaveCall,s=t.myVideo,o=t.videoStream,j=t.connectionRef,b=t.chatVisibility,u=t.setChatVisibility,h=Object(n.useState)(!0),f=Object(d.a)(h,2),O=f[0],x=f[1],p=Object(n.useState)(!0),m=Object(d.a)(p,2),y=m[0],C=m[1],w=Object(n.useState)(!1),k=Object(d.a)(w,2),q=k[0],F=k[1],G=Object(n.useState)(null),L=Object(d.a)(G,2),Y=L[0],H=L[1],K=function(){j.current.replaceTrack(c.getTracks()[1],o.getTracks()[1],c),s.current.srcObject=o,Y&&Y.getTracks()[0].stop(),F(!1)};return Object(g.jsx)("div",{className:e.wrapper,children:Object(g.jsx)(l.a,{className:e.appBar,position:"fixed",children:Object(g.jsxs)(S.a,{children:[O&&Object(g.jsx)(N.a,{title:"Turn Camera Off",children:Object(g.jsx)(T.a,{onClick:function(){x(!1),c.getVideoTracks().forEach((function(e){return e.enabled=!1}))},children:Object(g.jsx)(R.a,{fontSize:"large",style:{fill:"white"}})})}),!O&&Object(g.jsx)(N.a,{title:"Turn Camera On",children:Object(g.jsx)(T.a,{onClick:function(){x(!0),c.getVideoTracks().forEach((function(e){return e.enabled=!0}))},children:Object(g.jsx)(z.a,{fontSize:"large",style:{fill:"white"}})})}),y&&Object(g.jsx)(N.a,{title:"Turn Mic Off",children:Object(g.jsx)(T.a,{onClick:function(){C(!1),c.getAudioTracks().forEach((function(e){return e.enabled=!1}))},children:Object(g.jsx)(I.a,{fontSize:"large",style:{fill:"white"}})})}),!y&&Object(g.jsx)(N.a,{title:"Turn Mic On",children:Object(g.jsx)(T.a,{onClick:function(){C(!0),c.getAudioTracks().forEach((function(e){return e.enabled=!0}))},children:Object(g.jsx)(D.a,{fontSize:"large",style:{fill:"white"}})})}),a&&Object(g.jsxs)("div",{children:[!q&&Object(g.jsx)(N.a,{title:"Share Your Screen",children:Object(g.jsx)(T.a,{onClick:function(){navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){H(e),j.current.replaceTrack(c.getTracks()[1],e.getTracks()[0],c),s.current.srcObject=e,F(!0),e.getTracks()[0].onended=function(){K()}}))},children:Object(g.jsx)(V.a,{fontSize:"large",style:{fill:"white"}})})}),q&&Object(g.jsx)(N.a,{title:"Stop Sharing",children:Object(g.jsx)(T.a,{onClick:function(){K()},children:Object(g.jsx)(A.a,{fontSize:"large",style:{fill:"white"}})})}),Object(g.jsx)(N.a,{title:"Copy Meet ID",children:Object(g.jsx)(U.CopyToClipboard,{text:i,children:Object(g.jsx)(T.a,{children:Object(g.jsx)(B.a,{fontSize:"large",style:{fill:"white"}})})})}),Object(g.jsx)(N.a,{title:"Raise Hand",children:Object(g.jsx)(T.a,{children:Object(g.jsx)(E.a,{fontSize:"large",style:{fill:"white"}})})}),Object(g.jsx)(N.a,{title:"Show Conversation",children:Object(g.jsx)(T.a,{onClick:function(){u(!b)},children:Object(g.jsx)(J.a,{fontSize:"large",style:{fill:"white"}})})}),Object(g.jsx)(N.a,{title:"Show Participants",children:Object(g.jsx)(T.a,{children:Object(g.jsx)(M.a,{fontSize:"large",style:{fill:"white"}})})}),Object(g.jsx)(N.a,{title:"Leave Call",children:Object(g.jsx)(T.a,{onClick:r,children:Object(g.jsx)(W.a,{fontSize:"large",style:{fill:"red"}})})})]})]})})})},F=Object(j.a)((function(e){return{notification:{zIndex:"2000",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},paper:{display:"flex",justifyContent:"center",padding:"10px"}}})),G=function(){var e=Object(n.useContext)(v),t=e.answerCall,a=e.call,i=e.callAccepted,c=e.callJoined,r=F();return Object(g.jsxs)("div",{className:r.notification,children:[a.isReceivedCall&&!i&&Object(g.jsxs)(b.a,{className:r.paper,children:[Object(g.jsxs)("h1",{children:[a.name," is calling: \xa0 \xa0 \xa0"]}),Object(g.jsx)(h.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]}),c&&!i&&Object(g.jsx)(b.a,{className:r.paper,children:Object(g.jsx)("h1",{children:"Waiting for host to let you in..."})})]})},L=a(210),Y=Object(j.a)((function(e){return{paper:{padding:"10px",height:"85vh",width:"20vw",border:"1px solid black",zIndex:"3000",position:"absolute",top:"10vh",right:"0"},messageField:{width:"78%"},chatContainer:{height:"78vh",overflowY:"auto"},message:{width:"60%",padding:"5px",margin:"5px",border:"1px solid black",borderRadius:"5px"},left:{float:"left",clear:"both",backgroundColor:"white"},right:{float:"right",clear:"both",backgroundColor:"#6264a7",color:"white"},middle:{marginLeft:"auto",marginRight:"auto",textAlign:"center",clear:"both",backgroundColor:"lightblue"}}})),H=function(){var e=Object(n.useContext)(v),t=e.chatVisibility,a=e.messageRef,i=e.connectionRef,c=e.name,r=Y(),l=Object(n.useState)(""),s=Object(d.a)(l,2),o=s[0],j=s[1];return Object(g.jsx)("div",{children:t&&Object(g.jsxs)(b.a,{className:r.paper,children:[Object(g.jsx)("div",{id:"chat-container",className:r.chatContainer,children:a.current.map((function(e){return"middle"===e.position?Object(g.jsx)("div",{className:[r.message,r.middle].join(" "),children:e.message}):"left"===e.position?Object(g.jsx)("div",{className:[r.message,r.left].join(" "),children:e.message}):Object(g.jsx)("div",{className:[r.message,r.right].join(" "),children:e.message})}))}),Object(g.jsxs)("form",{action:"#",autoComplete:"off",children:[Object(g.jsx)(u.a,{label:"Type Message",value:o,name:"messageInp",id:"messageInp",className:r.messageField,onChange:function(e){return j(e.target.value)}}),Object(g.jsx)(N.a,{title:"Send Message",children:Object(g.jsx)(T.a,{type:"submit",color:"primary",onClick:function(e){e.preventDefault(),o&&(a.current.push({message:o,position:"right"}),i.current&&i.current.send(c+": "+o),j(""))},children:Object(g.jsx)(L.a,{fontSize:"large"})})})]})]})})},K=Object(j.a)((function(e){return{appBar:Object(r.a)({padding:"10px",display:"flex",flexDirection:"row",width:"100%",border:"2px solid black",background:"#0a0a0a"},e.breakpoints.down("xs"),{width:"90%"}),wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},video:Object(r.a)({width:"50vw",height:"78vh",border:"2px solid black"},e.breakpoints.down("xs"),{width:"300px"}),typography:{zIndex:"1000",position:"absolute",border:"2px solid black",background:"#6264a7",padding:"5px 5px"}}})),Q=function(){var e=K(),t=Object(n.useContext)(v),a=t.name,i=t.callAccepted,c=t.callStarted,r=t.myVideo,j=t.userVideo,d=t.callEnded,b=t.stream,u=t.call;return Object(g.jsxs)("div",{children:[Object(g.jsx)(l.a,{className:e.appBar,position:"static",children:Object(g.jsx)(s.a,{variant:"h6",align:"center",fontFamily:"Open Sans",children:"Microsoft Teams Clone"})}),Object(g.jsxs)(o.a,{container:!0,xs:12,direction:"row",justify:"center",children:[Object(g.jsx)(o.a,{container:!0,xs:6,children:b&&Object(g.jsxs)(o.a,{item:!0,xs:12,md:6,children:[Object(g.jsx)(s.a,{className:e.typography,variant:"h5",gutterBottom:!0,children:a||"Name"}),Object(g.jsx)("video",{playsInline:!0,muted:!0,ref:r,autoPlay:!0,className:e.video})]})}),!i&&!c&&Object(g.jsx)(o.a,{container:!0,xs:6,direction:"column",justify:"center",children:Object(g.jsx)(k,{})}),i&&!d&&Object(g.jsxs)(o.a,{item:!0,xs:12,md:6,children:[Object(g.jsx)(s.a,{className:e.typography,variant:"h5",gutterBottom:!0,children:u.name||"Name"}),Object(g.jsx)("video",{playsInline:!0,ref:j,autoPlay:!0,className:e.video})]})]}),Object(g.jsx)(H,{}),Object(g.jsx)(q,{}),Object(g.jsx)(G,{})]})};a(158);c.a.render(Object(g.jsx)(C,{children:Object(g.jsx)(Q,{})}),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.6eb49b8a.chunk.js.map